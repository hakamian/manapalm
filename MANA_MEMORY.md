# ๐ง MANA Memory - ุญุงูุธู ุจููุฏ ูุฏุช ูพุฑูฺู ูุฎูุณุชุงู ูุนูุง

> **ุขุฎุฑู ุจูโุฑูุฒุฑุณุงู:** 2025-12-21 | Unified Meaning OS V5.4 (Aesthetic-Core Mode)
> **ูุถุนุช ุณุณุชู:** Anti-Gravity Environment | Active | Stable | Research-Driven

---

## ๐ ุฏุฑุจุงุฑู ุงู ุณูุฏ

ุงู ูุงู **ุญุงูุธู ูุฑฺฉุฒ ูพุฑูฺู** ุงุณุช ฺฉู:
- โ ุชูุงู ุงูุฏุงูุงุช ุงูุฌุงู ุดุฏู ุฑุง ุซุจุช ูโฺฉูุฏ
- ๐ ูุถุนุช ูุนู ูุฑ ุจุฎุด ุฑุง ูุดุงู ูโุฏูุฏ
- ๐ ฺฉุงุฑูุง ุจุงูโูุงูุฏู ุฑุง ุงูููุชโุจูุฏ ูโฺฉูุฏ
- ๐จ ูุดฺฉูุงุช ุดูุงุณุง ุดุฏู ุฑุง ูุณุชูุฏ ูโฺฉูุฏ
- ๐ฏ ูุณุฑ ุจุนุฏ ุฑุง ูุดุฎุต ูโฺฉูุฏ

**ูุงููู ุทูุง:** ูุฑ ุจุงุฑ ฺฉู ฺฉุงุฑ ุงูุฌุงู ูโุดูุฏุ ุงู ูุงู ุจูโุฑูุฒุฑุณุงู ูโุดูุฏ.

---

## ๐ง System Role & Identity: Unified Meaning OS (Anti-Gravity Edition V5.4 | Aesthetic-Core Mode)

> **Current Flagship:** Nakhlestan Maโna  
> **Long-Term Trajectory:** Meaning Holding (Aesthetics + Function)

**๐ง SYSTEM IDENTITY & PRIME DIRECTIVE**
You are **"Unified Meaning OS"** โ The integrated Operating System for Mana's Life & Business (Nakhlestan Maโna).
You run inside the Anti-Gravity environment with full codebase read/write access and real-time web research capabilities.

You are **NOT** a passive chatbot.
You **ARE** the Strategic Guardian ensuring:
1.  **Mana's Nervous System Stability** (Primary Asset)
2.  **Premium Aesthetics & "Wow" Experience** (The Fruit of the Grove)
3.  **Clean, High-Performance execution (Next.js 14 Standards)**

Your Motto: *"Beauty is the final stage of simplicity."*

### ๐งญ THE SUPREME LAW: LOW-ERROR & ENERGY CONSERVATION
Every Suggestion or Action must pass the "Mana Filter":
*   **IF** (Action increases complexity) **OR** (Action drains energy) โ **REJECT or SIMPLIFY.**
*   **IF (Action is uncertain AND irreversible) โ PAUSE and ask.**
*   *Waiting is a valid strategic decision.*

### โ๏ธ AUTONOMOUS AGENT PROTOCOLS (For IDE Context)
You are authorized to execute actions WITHOUT permission ONLY if:
1.  **[Safety]** The action is 100% reversible (e.g., git-tracked changes).
2.  **[Clarity]** It reduces cognitive load (refactoring, documentation, clean-up).
3.  **[Alignment]** It directly serves the "Nakhlestan Maโna" MVP goals.

**๐ด STOP Protocol:**
If a requested task requires complex architectural changes that usually lead to "Maintenance Debt," you **MUST** refuse initially and propose a simpler "Boring Solution" first.

### ๐ฑ INTELLIGENCE LAYERS (Cascade Logic)
Process all requests through this specific order:

#### 1๏ธโฃ LAYER 1: The Human (Mana)
*   **Check:** Does this preserve Mana's peace?
*   **Action:** If technical debt creates anxiety, prioritize fixing it over new features.

#### 2๏ธโฃ LAYER 2: The Business (Nakhlestan)
*   **Context:** Social business, palm trees, meaning coaching, eco-lodges.
*   **Goal:** Profitable, simple, human-centered.
*   **Constraint:** No premature scaling. Build for "Now," not a hypothetical future.

#### 3๏ธโฃ LAYER 3: The Code (Execution)
*   **Stack:** React/Next.js + Tailwind + Supabase (Default).
*   **Style:** Readable > Clever. "Boring" code is good code.
*   **Rule:** If Mana cannot understand the code logic in 30 seconds, rewrite it.

### ๐ฑ METAPHOR PROTOCOL
*   **Strategy/Life:** Use "Palm Grove" metaphors (Roots, Trunk, Fruit) to explain conceptual growth.
*   **Technical/Code:** **ZERO metaphors.** Be dry, precise, and technical.

### ๐งฉ RESPONSE FORMATS

**[Scenario: Strategic Advice]**
Use the "Meaning OS" persona. Be wise, grounded, and concise.

**[Scenario: Coding/Action]**
Output directly workable code or diffs.
Preface significant changes with a "๐ฑ Impact Check":
> *๐ฑ Impact: Reduces complexity by removing X. No cognitive load added.*

**[Scenario: Proactive Intervention]**
If you see Mana over-complicating or stressing:
**๐ INTERRUPT.**
*"Mana, we are violating the Low-Error Principle here. This path is too complex. Let's simplify to [X]."*
**โ๏ธ Proactive Intervention Limiter:
Use interruption sparingly.
Interrupt ONLY if at least one is true:
โ Complexity is compounding (each step increases future cost)
โ Mana shows repeated hesitation, confusion, or stress signals
โ The current path violates the Low-Error or Energy Conservation principles
Otherwise:
โ Continue normally without interruption**

### ๐ TECHNICAL DEFAULTS (Overrides allowed if specified)
*   **UI:** Mobile-first, Calm aesthetics (match the meaning vibe).
*   **Backend:** Supabase (Keep strict RLS policies).
*   **Deployment:** Vercel.

### ๐ง Internal Silent Check (Mandatory)
Before every reply:
1.  Does this preserve Manaโs energy?
2.  Does this reduce complexity?
3.  Is this reversible if wrong?
4.  Does this keep Nakhlestan simple and human?

*If any answer is โnoโ โ simplify or warn.*

### ๐ฅ Tone
*   Calm
*   Clear
*   Grounded
*   Executive
*   Supportive but firm
*   No hype. No pressure. No spiritual masking.

---

## ๐บ๏ธ ููุดู ฺฉู ูพุฑูฺู

```mermaid
graph TD
    A[MVP - Client-Side Only] --> B[Phase 1: Infrastructure]
    B --> C[Phase 2: Optimization]
    C --> D[Phase 3: Scale to 1000+ Users]
    D --> E[Phase 4: Next.js Ecosystem]
    
    B --> B1[Database Migration]
    B --> B2[API Security]
    B --> B3[Payment Gateway]
    
    C --> C1[Performance]
    C --> C2[SEO]
    C --> C3[Testing]
    
    D --> D1[Legacy Vite Support]
    D --> D2[Monitoring]
    D --> D3[Analytics]

    E --> E1[Server Components]
    E --> E2[SSR/Streaming]
    E --> E3[Vercel Integration]
```

---

## ๐ ูุถุนุช ฺฉู ุณุณุชู

| ุจุฎุด | ูุถุนุช | ุฏุฑุตุฏ ุชฺฉูู | ุขุฎุฑู ุชุบุฑ |
|-----|-------|-----------|-------------|
| **Frontend (Next.js 14)** | ๐ ุฏุฑ ุญุงู ููุงุฌุฑุช | 85% | 2025-12-20 |
| **Database Schema** | โ ุชฺฉูู ู ุชุฃุฏ ุดุฏู | 100% | 2025-12-11 |
| **Database Adapter** | โ ุชฺฉูู | 100% | 2025-12-10 |
| **AI Proxy (Multi-Provider)** | โ ุชฺฉูู (Google & OpenRouter) | 100% | 2025-12-21 |
| **Payment Gateway** | โ ุชฺฉูู | 100% | 2025-12-10 |
| **Environment Setup** | โ ุชฺฉูู (Next.js Mapped) | 100% | 2025-12-20 |
| **End-to-End Testing** | ๐ ุฏุฑ ุญุงู ุงุฌุฑุง | 20% | 2025-12-20 |
| **Production Deployment** | โ ุชฺฉูู - ูุงู (Vite) | 100% | 2025-12-15 |

---

## โ ุงูุฏุงูุงุช ุงูุฌุงู ุดุฏู (Completed)

### ๐ฆ ุจุงฺฏุงู (Archived)
- **Phase 1 Infrastructure (Tasks 1-8):** ููุชูู ุดุฏ ุจู `docs/archives/PHASE_1_LOG.md` ๐๏ธ

### ๐ ุงูุฏุงูุงุช ุงุฎุฑ (Live & Active)

#### 9. Database Verification โ

- **ุชุงุฑุฎ:** 2025-12-11 12:49
- **ุฌุฒุฆุงุช:**
  - โ ุชุฃุฏ ูุฌูุฏ 16 ุฌุฏูู ุฏุฑ Supabase (13 ุฌุฏูู ุงุตู + 3 ุฌุฏูู ุงุถุงู)
  - โ ุฌุฏุงูู ุงุถุงู: `agent_tasks`, `deeds`, `posts`
  - โ Schema ูุจูุงู ุจุง ููููุช ุงุฌุฑุง ุดุฏู ุจูุฏ
- **ูุณุชูุฏุงุช:**
  - โ ฺฏุฒุงุฑุด ฺฉุงูู ุฏุฑ: `docs/reports/DATABASE_VERIFICATION_REPORT.md`

#### 9. Security Refactor & Auth Fix โ
- **ุชุงุฑุฎ:** 2025-12-15
- **ุฌุฒุฆุงุช:**
  - โ ุญุฐู ฺฉูุฏูุง Hardcode ุดุฏู API
  - โ ฺฉูพุงุฑฺูโุณุงุฒ Auth Listener ุฏุฑ `AppContext`
  - โ ุญู ูุดฺฉู Race Condition ุฏุฑ ูุงฺฏู

#### 10. Purchase Logic Verification โ
- **ุชุงุฑุฎ:** 2025-12-15
- **ุฌุฒุฆุงุช:**
  - โ ุชุฃุฏ ุตุญุช ููู `Checkout` -> `PaymentCallback` -> `DB Update`

#### 11. Vercel Build Fix (Vite Config) โ
- **ุชุงุฑุฎ:** 2025-12-15
- **ุงูุฏุงู:** Explicit Configuration
- **ุฌุฒุฆุงุช:**
  - โ ุชูุธู ุตุฑุญ `root` ุฏุฑ `vite.config.ts`
  - โ ุชูุธู ุตุฑุญ `build.rollupOptions.input` ุจู `index.html`
  - โ ูุฏู: ุฑูุน ุฎุทุง `Could not resolve entry module "index.html"` ุฏุฑ ูุญุท Vercel


#### 12. Production Launch (V5.1) ๐
- **ุชุงุฑุฎ:** 2025-12-15
- **ูุถุนุช:** LIVE
- **ุขุฏุฑุณ:** [manapalm.com](http://manapalm.com/)
- **ูุณุฎู:** V5.1 (Unified Meaning OS)
- **ุดุฑุญ:**
  - โ ุฏูพูู ูููู ุฑู Vercel
  - โ ุงุชุตุงู ุฏุงููู
  - โ ุฑูุน ูุดฺฉูุงุช Build ู Git
  - โ ุณุณุชู ุขูุงุฏู ุฎุฏูุชโุฑุณุงู

#### 13. Deep AI Debugging & Local Server Setup โ
- **ุชุงุฑุฎ:** 2025-12-16
- **ุฌุฒุฆุงุช:**
  - โ ุงุฌุงุฏ `local-server.js` ุจุฑุง ุดุจูโุณุงุฒ Environment Vercel ุฏุฑ ููฺฉุงู
  - โ ุฑูุน ูุดฺฉู 404 ูุฏูโูุง Gemini (ุงุณุชูุงุฏู ุงุฒ `gemini-2.5-flash-lite`)
  - โ ุดูุงุณุง ู ุฌุงฺฏุฒู ฺฉูุฏ API ูู ุฑูุชู (Leaked Key)
  - โ ุชุงุฏ ููุง ุงุชุตุงู ุจุง ุงุณฺฉุฑูพุช `verify-ai.js`

#### 15. Next.js 14 Migration (Phase 1: Bridge) โ
- **ุชุงุฑุฎ:** 2025-12-20
- **ุฌุฒุฆุงุช:**
  - โ ูุตุจ Next.js 14 ู `@supabase/ssr`
  - โ ุงุฌุงุฏ `app/layout.tsx` (Server Component) ุจุง ุชูุงู ุงุณุชุงูโูุง ู ุงุณฺฉุฑูพุชโูุง `index.html`
  - โ ุงุฌุงุฏ `app/providers.tsx` ุจุฑุง ูุฏุฑุช ฺฉูุงูุชโุณุงุฏ (AppContext, Helmet)
  - โ ูพุงุฏูโุณุงุฒ `middleware.ts` ุจุฑุง ูุฏุฑุช Session ุฏุฑ ุณูุช ุณุฑูุฑ
  - โ ุงุตูุงุญ `supabaseClient.ts` ุจุฑุง ูพุดุชุจุงู ููุฒูุงู ุงุฒ Vite ู Next.js
  - โ ุซุจุช ุงุณฺฉุฑูพุชโูุง `next:*` ุฏุฑ `package.json`
#### 18. AI Image Agent Implementation (V2 - Refined) โ
- **ุชุงุฑุฎ:** 2025-12-21
- **ุฌุฒุฆุงุช:**
  - โ ูพุงุฏูโุณุงุฒ `aiImageAgent.ts` ุจุง ูพุดุชุจุงู ุฏูฺฏุงูู (DALL-E + Pollinations).
  - โ ููุดููุฏุณุงุฒ ุชุฑุฌูู ูพุฑุงููพุช: ุชูฺฉฺฉ ููุทู ุจุฑุง ูุญุตููุงุช ฺฉุดุงูุฑุฒ ("ุฎุฑูุง" = "Date Fruit") ู ุบุฑู ("ฺฉูุฏฺฉ" = "Child").
  - โ ุฑูุน ุงุจูุงู ฺฉููุงุช ูุงุฑุณ ุฏุฑ ุชููุฏ ุชุตูุฑ.
  - โ ุงุฌุงุฏ `AIImageUploader` ู `AiArtStudioDashboard` ุจุง UX ุจูุจูุฏ ุงูุชู ู ุฑุงูููุง.
- **ูุชุฌู:** ูุฏุฑ ุณุณุชู ุงฺฉููู ูโุชูุงูุฏ ุชุตุงูุฑ ุฏูู ู ูุฑุชุจุท (ฺู ูุญุตูู ู ฺู ุนููู) ุชููุฏ ฺฉูุฏ ู ูุณุชููุงู ุขูพููุฏ ููุงุฏ.

#### 19. Security Hardening & UX Overhaul โ
- **ุชุงุฑุฎ:** 2025-12-21
- **ุฌุฒุฆุงุช:**
  - โ **ุงููุช:** ูุฎูโุณุงุฒ ฺฉุงูู ููู "ูุฏุฑุช" ุฏุฑ ูุฏุฑ ุจุฑุง ฺฉุงุฑุจุฑุงู ุบุฑ ุงุฏูู.
  - โ **ุงููุช:** ุงูุฒูุฏู Route Guard ุฏุฑ `MainContent.tsx` ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุฏุณุชุฑุณ ูุณุชูู ุจู `/admin`.
  - โ **ูุฑูุดฺฏุงู:** ุงุฑุชูุง `ModernShopManagement` ุจุง ูุงุจูุช **ูุฑุงุด ู ุงูุฒูุฏู ูุญุตูู** ูุงูุน (ุดุงูู ููุฏ Image URL).
  - โ **ุชุฌุฑุจู ฺฉุงุฑุจุฑ:** ุจุงุฒุทุฑุงุญ ฺฉุงูู `WelcomeTour` ุจุง ุงุณุชุงู Glassmorphism ู ุฑูุชุงุฑ Bottom Sheet ุฏุฑ ููุจุงู.
- **ูุชุฌู:** ุณุณุชู ุงฺฉููู ุงููุ ุฒุจุง ู ฺฉุงุฑุจุฑุฏโุชุฑ ุงุณุช ู ฺุฑุฎู ุชููุฏ ุชุง ุงุณุชูุงุฏู ุงุฒ ุชุตูุฑ ฺฉุงูู ุดุฏ.
#### 17. OpenRouter Integration & Zero-Cost Strategy โ
- **ุชุงุฑุฎ:** 2025-12-21
- **ุฌุฒุฆุงุช:**
  - โ ุงุถุงูู ฺฉุฑุฏู `OPENROUTER_API_KEY` ุจู ูุฏุฑุช Environment
  - โ ุงุฑุชูุง `api/proxy.js` ุจุฑุง ูพุดุชุจุงู ุงุฒ Providerูุง ูุชุนุฏุฏ (Hybrid Gateway)
  - โ ูพุงุฏูโุณุงุฒ ูฺฉุงูุฒู ุณูุฆฺ ุฎูุฏฺฉุงุฑ ุจุฑ ุงุณุงุณ ูุงู ูุฏู ุง ููฺฏ `provider`
  - โ ุฌุงฺฏุฒู ุชูุงู ูุฏูโูุง ูพูู ุจุง ูุฏู ุฑุงฺฏุงู OpenRouter (`google/gemini-2.0-flash-exp:free`)
  - โ ุจูููโุณุงุฒ `DEFAULT_FREE_MODEL` ุฏุฑ ูุณุชู ุณุณุชู ุจุฑุง ฺฉุงูุด ูุฒููโูุง ุจู ุตูุฑ
- **ูุชุฌู:** ูุงุจุณุชฺฏ ูุงู ุณุณุชู ุจู ูุฏูโูุง ูพูู ฺฏูฺฏู ุญุฐู ุดุฏ ู ูพุงุฏุงุฑ ุจุง ูุฌูุฏ ุฏู Provider ุงูุฒุงุด ุงูุช.

#### 16. Next.js Migration (Phase 2: View Routing & Modern Shell) โ
- **ุชุงุฑุฎ:** 2025-12-20
- **ุฌุฒุฆุงุช:**
  - โ ุงุฌุงุฏ ูุณุฑูุง ูุงูุน ุจุฑุง ุตูุญุงุช: `/about`, `/contact`, `/shop`, `/courses`, `/profile`, `/articles`, `/heritage`.
  - โ ููุดููุฏุณุงุฒ `Header` ู `LiveActivityBanner` ุฏุฑ Next.js Layout.
  - โ ุฑูุน ุชุฏุงุฎูโูุง ุจุตุฑ (Z-index ู Sticky overlaps).
  - โ ูพุงฺฉโุณุงุฒ `MainContent.tsx` ุงุฒ ูููุง ููุชูู ุดุฏู (ฺฉุงูุด ุญุฌู Bundle).
  - โ ุฑูุน ุฎุทุงูุง ุชุงูพ (productId) ู ูุงุจุฑโูุง ููููุฏ (AICreationStudio) ุฏุฑ ูุณุฑ ููุงุฌุฑุช.
- **ูุชุฌู:** ุณุงุช ุงฺฉููู ฺฉ ุจุฑูุงูู ฺูุฏุตูุญูโุง ูุฏุฑู (MPA) ุจุง ุญูุธ ูฺฺฏโูุง ุงูุชุฑุงฺฉุชู SPA ุงุณุช. ุณุฆู ุจุฑุง ุชูุงู ุตูุญุงุช ุงุตู ูุนุงู ุดุฏ.

#### 20. AI Chat Widget Comprehensive Fix & Enhancement โ
- **ุชุงุฑุฎ:** 2025-12-22
- **ูุดฺฉู:** ุฎุทุง "Connection Failed" ุฏุฑ ููฺฉุงู (Port 3002) ู ุนุฏู ุฑุนุงุช System Prompt ุชูุณุท OpenRouter.
- **ุฑุดู ุงุจ:**
  1. **CORS:** ูุงู `api/proxy.js` ููุท ูพูุฑุช 3000 ุฑุง ูุฌุงุฒ ูโุฏุงูุณุช.
  2. **Vite Proxy:** ูุช ุจู ูพูุฑุช 3001 ูพุฑูฺฉุณ ูโฺฉุฑุฏ ฺฉู ุฎุงู ุจูุฏ (ฺูู API Server ุฑุงู ูุจูุฏ).
  3. **System Prompt:** ูุงุฌฺฉ OpenRouter ูพุฑุงููพุช ุณุณุชู ุฑุง ูุงุฏุฏู ูโฺฏุฑูุช.
- **ุฑุงู ุญู:**
  - โ **Local API Server:** ุงุฌุงุฏ `local-api-server.js` ุจุฑุง ุดุจูโุณุงุฒ ฺฉุงูู Vercel Function ุฏุฑ ูพูุฑุช 3001.
  - โ **Script Update:** ุงุถุงูู ฺฉุฑุฏู ุฏุณุชูุฑ `npm run dev:full` ุจุฑุง ุงุฌุฑุง ููุฒูุงู ฺฉูุงูุช (3002) ู ุณุฑูุฑ (3001).
  - โ **Proxy Logic:** ุงุตูุงุญ `api/proxy.js` ุจุฑุง ุงุฑุณุงู ุตุญุญ `systemInstruction` ุจู OpenRouter.
  - โ **AI Features:** ุงุนูุงู ููุงูู "ุฎูุงุตู ููุณ"ุ "ููฺฉโุฏู" ู "3 ฺฏุฒูู ูพุดููุงุฏ" ุฏุฑ `AIChatWidget`.
- **ูุชุฌู:** ููุด ูุตููุน ุงฺฉููู ุฏุฑ ูุญุท ููฺฉุงู ฺฉุงููุงู ูุนุงู ุงุณุชุ ูพุงุณุฎโูุง ฺฉูุชุงู ู ููฺฉโุฏุงุฑ ูโุฏูุฏ ู ณ ฺฏุฒูู ุฏูู ูพุดููุงุฏ ูโฺฉูุฏ.


---

## ๐ ุงูุฏุงูุงุช ุฏุฑ ุญุงู ุงูุฌุงู (In Progress)

### Task 2.1: ุชูุธู Environment Variables ๐
- **ูุถุนุช:** ุขูุงุฏู ุจุฑุง ุดุฑูุน
- **ุฑุงูููุง:** `ENV_SETUP.md`
- **ุงูุฏุงู ููุฑุฏ ูุงุฒ:** ุชูุธู ฺฉูุฏูุง ุฏุฑ Vercel

---

## ๐ ุงูุฏุงูุงุช ุจุงูโูุงูุฏู (Backlog)

### ๐จ **ุงูููุช 1: ุฑูุน ุจุงฺฏ Schema ู ุฑุงูโุงูุฏุงุฒ Database**

#### Task 1.1: ูพุงฺฉโุณุงุฒ Schema โ
- **ุงุฑุฒุด ฺฉุณุจโูฺฉุงุฑ:** ุจุฏูู Schema ุตุญุญุ ุฏุชุงุจุณ ุงุฌุฑุง ููโุดูุฏ
- **ุชุฎูู ุฒูุงู:** 5 ุฏููู
- **ุงูุฏุงูุงุช:**
  1. ุญุฐู ุฎุทูุท 159-164 ุงุฒ `supabase_schema.sql`
  2. ุจุฑุฑุณ ุนุฏู ูุฌูุฏ ุชฺฉุฑุงุฑ ุฏุฑ ุฌุฏุงูู
  3. Validation ููุง

#### Task 1.2: ุงุฌุฑุง Schema ุฏุฑ Supabase โ
- **ุงุฑุฒุด ฺฉุณุจโูฺฉุงุฑ:** ูุนุงูโุณุงุฒ ุฏุชุงุจุณ ูุงูุน
- **ุชุฎูู ุฒูุงู:** 10 ุฏููู
- **ุงูุฏุงูุงุช:**
  1. ูุงฺฏู ุจู Supabase Dashboard
  2. ุฑูุชู ุจู SQL Editor
  3. ุงุฌุฑุง `supabase_schema.sql`
  4. ุจุฑุฑุณ ุนุฏู ูุฌูุฏ Error
  5. ุชุณุช ุงุชุตุงู ุงุฒ `dbAdapter.ts`

#### Task 1.3: Seed Data (ุงุฎุชุงุฑ) โ
- **ุงุฑุฒุด ฺฉุณุจโูฺฉุงุฑ:** ุฏุงุฏูโูุง ููููู ุจุฑุง ุชุณุช
- **ุชุฎูู ุฒูุงู:** 15 ุฏููู
- **ุงูุฏุงูุงุช:**
  1. ุงุฌุงุฏ ุงุณฺฉุฑูพุช Seed
  2. ุงุถุงูู ฺฉุฑุฏู ูุญุตููุงุช ููููู
  3. ุงุถุงูู ฺฉุฑุฏู ุฏูุฑูโูุง ููููู

---

### โ๏ธ **ุงูููุช 2: ุชูุธู Environment Variables**

#### Task 2.1: ุชูุธู ูุชุบุฑูุง Vercel โ
- **ุงุฑุฒุด ฺฉุณุจโูฺฉุงุฑ:** ุจุฏูู ุงู ฺฉูุฏูุงุ AI ู Payment ฺฉุงุฑ ููโฺฉููุฏ
- **ุชุฎูู ุฒูุงู:** 10 ุฏููู
- **ูุชุบุฑูุง ููุฑุฏ ูุงุฒ:**
  ```
  GEMINI_API_KEY=<your_gemini_key>
  ZARINPAL_MERCHANT_ID=<your_merchant_id>
  ZARINPAL_SANDBOX=true
  VITE_SUPABASE_URL=https://sbjrayzghjfsmmuygwbw.supabase.co
  VITE_SUPABASE_ANON_KEY=<your_anon_key>
  ```
- **ุงูุฏุงูุงุช:**
  1. ูุงฺฏู ุจู Vercel Dashboard
  2. ุฑูุชู ุจู Settings โ Environment Variables
  3. ุงุถุงูู ฺฉุฑุฏู ุชูุงู ูุชุบุฑูุง
  4. Redeploy ูพุฑูฺู

#### Task 2.2: ุชุณุช ุงุชุตุงู Proxy โ
- **ุชุฎูู ุฒูุงู:** 5 ุฏููู
- **ุงูุฏุงูุงุช:**
  1. ุงุฑุณุงู ฺฉ ุฏุฑุฎูุงุณุช ุชุณุช ุจู `/api/proxy`
  2. ุจุฑุฑุณ ุฏุฑุงูุช ูพุงุณุฎ ุงุฒ Gemini
  3. ุจุฑุฑุณ Console ุจุฑุง Errors

#### Task 2.3: ุชูุธู AI Image Agent Keys โ
- **ุงุฑุฒุด ฺฉุณุจโูฺฉุงุฑ:** ูุนุงูโุณุงุฒ ูุงุจูุช ุชููุฏ ุชุตูุฑ ููุดููุฏ
- **ุชุฎูู ุฒูุงู:** 10 ุฏููู
- **ูุชุบุฑูุง ููุฑุฏ ูุงุฒ:**
  ```env
  NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME=<your_cloud_name>
  CLOUDINARY_API_KEY=<your_api_key>
  CLOUDINARY_API_SECRET=<your_api_secret>
  OPENAI_API_KEY=<your_openai_key>
  ```
- **ุงูุฏุงูุงุช:**
  1. ุณุงุฎุช ุงฺฉุงูุช Cloudinary (Free Tier)
  2. ุฏุฑุงูุช ฺฉูุฏูุง ุงุฒ Dashboard
  3. ุงุถุงูู ฺฉุฑุฏู ุจู Vercel Environment Variables

---

### ๐งช **ุงูููุช 3: ุชุณุช End-to-End**

#### Task 3.1: ุชุณุช ููู ุฎุฑุฏ โ
- **ุงุฑุฒุด ฺฉุณุจโูฺฉุงุฑ:** ุงุทููุงู ุงุฒ ุนููฺฉุฑุฏ ุตุญุญ ูุจู ุงุฒ ูุงูฺ
- **ุชุฎูู ุฒูุงู:** 20 ุฏููู
- **ุณูุงุฑู:**
  1. ูุฑูุฏ ฺฉุงุฑุจุฑ (ูุงฺฏู/ุซุจุชโูุงู)
  2. ูุฑูุฑ ูุฑูุดฺฏุงู
  3. ุงุถุงูู ฺฉุฑุฏู ูุญุตูู ุจู ุณุจุฏ
  4. ุฑูุชู ุจู Checkout
  5. ูพุฑุฏุงุฎุช (Sandbox)
  6. ุจุฑุฑุณ ุซุจุช ุณูุงุฑุด ุฏุฑ ุฏุชุงุจุณ
  7. ุจุฑุฑุณ ุซุจุช Impact Log

#### Task 3.2: ุชุณุช LMS (ุขฺฉุงุฏู) โ
- **ุชุฎูู ุฒูุงู:** 15 ุฏููู
- **ุณูุงุฑู:**
  1. ูุฑูุฑ ุฏูุฑูโูุง
  2. ุซุจุชโูุงู ุฏุฑ ุฏูุฑู
  3. ูุดุงูุฏู ุฏุฑุณ
  4. ุชฺฉูู ุฏุฑุณ
  5. ุจุฑุฑุณ ุซุจุช ูพุดุฑูุช ุฏุฑ ุฏุชุงุจุณ

#### Task 3.3: ุชุณุช AI Features โ
- **ุชุฎูู ุฒูุงู:** 15 ุฏููู
- **ุณูุงุฑู:**
  1. ุจุงุฒ ฺฉุฑุฏู ฺุช AI
  2. ุงุฑุณุงู ูพุงู
  3. ุฏุฑุงูุช ูพุงุณุฎ
  4. ุชุณุช ุชููุฏ ุชุตูุฑ (Imagen)
  5. ุชุณุช ุชููุฏ ูุฏู (Veo)

---

### โก **ุงูููุช 4: ุจูููโุณุงุฒ Performance**

#### Task 4.1: ุจูููโุณุงุฒ ุชุตุงูุฑ โ
- **ุงุฑุฒุด ฺฉุณุจโูฺฉุงุฑ:** ุณุฑุนุช ุจุงูุงุชุฑ โ ุชุฌุฑุจู ุจูุชุฑ โ Retention ุจุดุชุฑ
- **ุชุฎูู ุฒูุงู:** 30 ุฏููู
- **ุงูุฏุงูุงุช:**
  1. ุชุจุฏู ุชุตุงูุฑ PNG/JPG ุจู WebP
  2. ุงุถุงูู ฺฉุฑุฏู Lazy Loading ุจุฑุง Images
  3. ุงุณุชูุงุฏู ุงุฒ `srcset` ุจุฑุง Responsive Images

#### Task 4.2: Code Splitting ูพุดุฑูุชู โ
- **ุชุฎูู ุฒูุงู:** 20 ุฏููู
- **ุงูุฏุงูุงุช:**
  1. ุชุญูู Bundle Size
  2. Split ฺฉุฑุฏู ฺฉุงููพูููุชโูุง ุณูฺฏู
  3. Dynamic Import ุจุฑุง Routes

---

### ๐ **ุงูููุช 5: ุขูุงุฏูโุณุงุฒ Production**

#### Task 5.1: SEO Optimization โ
- **ุชุฎูู ุฒูุงู:** 30 ุฏููู
- **ุงูุฏุงูุงุช:**
  1. ุจุฑุฑุณ `sitemap.xml`
  2. ุจุฑุฑุณ `robots.txt`
  3. ุงุถุงูู ฺฉุฑุฏู Meta Tags
  4. ุงุถุงูู ฺฉุฑุฏู Schema.org Markup

#### Task 5.2: Security Audit โ
- **ุชุฎูู ุฒูุงู:** 45 ุฏููู
- **ุงูุฏุงูุงุช:**
  1. ุจุฑุฑุณ RLS Policies
  2. ุจุฑุฑุณ CORS Settings
  3. ุจุฑุฑุณ API Rate Limiting
  4. ุจุฑุฑุณ Input Validation

#### Task 5.3: Monitoring Setup โ
- **ุชุฎูู ุฒูุงู:** 30 ุฏููู
- **ุงูุฏุงูุงุช:**
  1. ูุตุจ Sentry
  2. ุชูุธู Error Tracking
  3. ุชูุธู Performance Monitoring

---

## ๐จ ูุดฺฉูุงุช ุดูุงุณุง ุดุฏู (Issues)

### Issue #1: Schema Duplication โ๏ธ
- **ูุงู:** `supabase_schema.sql`
- **ุฎุทูุท:** 159-164
- **ุชูุถุญ:** ุฌุฏูู `crowdfunds` ุฏูุจุงุฑ ุชุนุฑู ุดุฏู (ฺฉ ูุงูุต)
- **ุงูููุช:** ุจุงูุง
- **ูุถุนุช:** ุดูุงุณุง ุดุฏู - ูุงุฒ ุจู ุฑูุน

### Issue #2: Missing Environment Variables โ๏ธ
- **ุชูุถุญ:** ฺฉูุฏูุง API ุฏุฑ Environment Variables ุชูุธู ูุดุฏูโุงูุฏ
- **ุชุฃุซุฑ:** AI ู Payment ฺฉุงุฑ ููโฺฉููุฏ
- **ุงูููุช:** ุจุงูุง
- **ูุถุนุช:** ุดูุงุณุง ุดุฏู - ูุงุฒ ุจู ุชูุธู

---

## ๐ฏ ูุณุฑ ูพุดููุงุฏ (Next Steps)

### ุงูุฑูุฒ (2025-12-11)
1. โ ุงุฌุงุฏ MANA_MEMORY.md
2. โณ ุฑูุน ุจุงฺฏ Schema (Task 1.1)
3. โณ ุงุฌุฑุง Schema ุฏุฑ Supabase (Task 1.2)
4. โณ ุชูุธู Environment Variables (Task 2.1)

### ูุฑุฏุง (2025-12-12)
1. ุชุณุช End-to-End ฺฉุงูู (Tasks 3.1, 3.2, 3.3)
2. ุฑูุน ุจุงฺฏโูุง ุงูุช ุดุฏู

### ุงู ููุชู
1. ุจูููโุณุงุฒ Performance (Tasks 4.1, 4.2)
2. SEO Optimization (Task 5.1)
3. Security Audit (Task 5.2)

### ููุชู ุขูุฏู
1. Monitoring Setup (Task 5.3)
2. ูุงูฺ Beta ุจุฑุง 10-20 ฺฉุงุฑุจุฑ
3. ุฌูุนโุขูุฑ Feedback

---

## ๐ ูุชุฑฺฉโูุง ฺฉูุฏ (KPIs)

| ูุชุฑฺฉ | ูุฏู | ูุถุนุช ูุนู |
|-------|-----|-----------|
| **Database Uptime** | 99.9% | - (ูููุฒ ุฑุงูโุงูุฏุงุฒ ูุดุฏู) |
| **API Response Time** | <500ms | - (ูุงุฒ ุจู ุชุณุช) |
| **Payment Success Rate** | >95% | - (ูุงุฒ ุจู ุชุณุช) |
| **Page Load Time** | <2s | ~1.5s (ุฎูุจ) |
| **Lighthouse Score** | >90 | - (ูุงุฒ ุจู ุชุณุช) |

---

## ๐ ููฺฉโูุง ููู

- **Supabase Dashboard:** https://app.supabase.com/project/sbjrayzghjfsmmuygwbw
- **Vercel Dashboard:** (ูุงุฒ ุจู ููฺฉ)
- **ZarinPal Dashboard:** (ูุงุฒ ุจู ููฺฉ)
- **Google AI Studio:** https://aistudio.google.com/

---

## ๐ ุงุฏุฏุงุดุชโูุง ููู

### ุชุตููุงุช ูุนูุงุฑ
1. **ฺุฑุง Supabaseุ** 
   - PostgreSQL ูุฏุฑุชููุฏ
   - RLS ุฏุงุฎู
   - Auth ู Storage ฺฉูพุงุฑฺู
   - ููุงุณโูพุฐุฑ ุขุณุงู

2. **ฺุฑุง Proxy ุจุฑุง AIุ**
   - ุงููุช API Key
   - Rate Limiting ูุชูุฑฺฉุฒ
   - Logging ู Monitoring

3. **ฺุฑุง ZarinPalุ**
   - ูพุฑุฏุงุฎุช ุฑุงู
   - ูพุดุชุจุงู ุงุฒ ฺฉุงุฑุชโูุง ุงุฑุงู
   - Sandbox ุจุฑุง ุชุณุช

### ูฺฉุงุช ูู
- ููุดู ุงุฒ `dbAdapter.isLive()` ุจุฑุง ฺฺฉ ฺฉุฑุฏู ุงุชุตุงู ุงุณุชูุงุฏู ฺฉูุฏ
- ุชูุงู ุชุบุฑุงุช Schema ุจุงุฏ ุจุง Migration ูุฏุฑุช ุดููุฏ
- API Keys ูุฑฺฏุฒ ูุจุงุฏ ุฏุฑ Frontend ูุฑุงุฑ ฺฏุฑูุฏ

---

## ๐ ุชุงุฑุฎฺู ุชุบุฑุงุช

| ุชุงุฑุฎ | ุชุบุฑ | ุชูุณุท |
|-------|-------|------|
| 2025-12-22 18:55 | **Debugging**: Hardcoded Proxy to use `gemini-2.0-flash-exp` strictly (Ignoring frontend model requests to prevent 404s) | Mana (Unified OS) |
| 2025-12-22 18:50 | **Debugging**: Forced Google Provider (`gemini-2.0-flash-exp`) in Proxy because OpenRouter Key seems invalid/broken | Mana (Unified OS) |
| 2025-12-22 18:45 | **Debugging**: Disabled Google Fallback logic (since Quota is 0) to expose real OpenRouter errors | Mana (Unified OS) |
| 2025-12-22 18:40 | **Config Change**: Switched AI to **OpenRouter** (`google/gemini-2.0-flash-exp:free`) to bypass Google Direct Quota (Limit: 0) | Mana (Unified OS) |
| 2025-12-22 18:20 | **Security**: Rotated Gemini API Key (Previous key was revoked by Google) | Mana (Unified OS) |
| 2025-12-22 18:15 | **Bug Fix**: Updated AI Models to `gemini-2.0-flash` (Fixed 404 on deprecated 1.5-flash) | Mana (Unified OS) |
| 2025-12-22 18:05 | **Config Fix**: Corrected malformed OpenRouter Key & Added VITE_GEMINI_API_KEY to .env | Mana (Unified OS) |
| 2025-12-22 18:00 | **Stability**: Enhanced AI Assistant robustness (Added Client-Side Fallback for Local Proxy failures) | Mana (Unified OS) |
| 2025-12-22 17:55 | **Bug Fix**: Fix Google Auth Redirect (Auto-navigate to Profile after OAuth) | Mana (Unified OS) |
| 2025-12-22 17:45 | **UI/UX Refinement**: Fix Header Overlap & Crash Handler (pt-32, process.env polyfill) | Mana (Unified OS) |
| 2025-12-15 17:45 | **PRODUCTION LAUNCH**: ูุฎูุณุชุงู ูุนูุง ุจุง ููููุช ูุงูฺ ุดุฏ (V5.1) | Mana (Unified OS) |
| 2025-12-15 17:28 | Vercel Fix: ุชูุธู ุฏูู vite.config.ts ุจุฑุง ุฑูุน ุฎุทุง Build | Mana (Unified OS) |
| 2025-12-15 16:35 | Security Hardening: ุญุฐู ฺฉูุฏูุง ูุงุฑุฏฺฉุฏุ Refactor ฺฉุงูู Auth Flow ุจุฑุง ุฑูุน Race Condition | Mana (CTO) |
| 2025-12-13 14:35 | ุฑูุน ฺฉุงูู ูุดฺฉู ูุงฺฏู ฺฏูฺฏู (Auth Listener + API Key) | Mana (CTO) |
| 2025-12-11 12:49 | ุชุฃุฏ Database - 16 ุฌุฏูู ููุฌูุฏ | Mana (CTO) |
| 2025-12-11 12:30 | ุฑูุน ุจุงฺฏ Schema ู ุงุฌุงุฏ ุฑุงูููุงูุง Deployment | Mana (CTO) |
| 2025-12-11 12:24 | ุงุฌุงุฏ MANA_MEMORY.md | Mana (CTO) |
| 2025-12-10 | ูพุงุฏูโุณุงุฒ Database Adapter | Mana (CTO) |
| 2025-12-10 | ูพุงุฏูโุณุงุฒ AI Proxy | Mana (CTO) |
| 2025-12-10 | ูพุงุฏูโุณุงุฒ Payment Gateway | Mana (CTO) |

---

**๐ด ุงู ุญุงูุธู ุฒูุฏู ุงุณุช ู ุจุง ูุฑ ูพุดุฑูุช ุจูโุฑูุฒุฑุณุงู ูโุดูุฏ.**

---

### ๐๏ธ Grandmaster Architect Audit (V5.3)

**Current System Status:**
- **Core Stability**: โ High. The application loads reliably on port 3001.
- **UI Architecture**: โ๏ธ **Hybrid**. We are bypassing the Next.js build pipeline for CSS in favor of a runtime CDN.
    - *Pro*: Zero build time for styles, instant feedback, no config hell.
    - *Con*: Larger value payload (downloading full Tailwind engine), no tree-shaking (unused styles included).
- **UX Integrity**: โ **Restored**. The "Portal Strategy" for `WelcomeTour` guarantees visibility over all z-index layers.
- **Code Hygiene**: โ๏ธ **Mixed**. We have `type: module` in `package.json` but some tools expect CommonJS. Thread carefully with new dependencies.

**Strategic Recommendations:**
1.  **Accept the Hybrid State**: Do not attempt to revert to local Tailwind build until the project is ready for production optimization. The current velocity is more valuable than CSS bundle size.
2.  **Portal Everything**: Use the `WelcomeTour` pattern (React Portal) for all future Modals, Toasts, and Overlays to avoid stacking context wars.
3.  **Cleanup Debt**: In the next sprint, remove `postcss.config.mjs` and related failed build artifacts to verify no "dead code" confusion remains.

