# ๐ง MANA Memory - ุญุงูุธู ุจููุฏ ูุฏุช ูพุฑูฺู ูุฎูุณุชุงู ูุนูุง

> **ุขุฎุฑู ุจูโุฑูุฒุฑุณุงู:** 2026-02-05 | Unified Meaning OS V7.5 (Integrated Deed Management & Premium UX)
> **ูุถุนุช ุณุณุชู:** Anti-Gravity Environment | Active | Reality-Check Mode

---

## ๐ ุฏุฑุจุงุฑู ุงู ุณูุฏ

ุงู ูุงู **ุญุงูุธู ูุฑฺฉุฒ ูพุฑูฺู** ุงุณุช ฺฉู:
- โ ุชูุงู ุงูุฏุงูุงุช ุงูุฌุงู ุดุฏู ุฑุง ุซุจุช ูโฺฉูุฏ
- ๐ ูุถุนุช ูุนู ูุฑ ุจุฎุด ุฑุง ูุดุงู ูโุฏูุฏ
- ๐ ฺฉุงุฑูุง ุจุงูโูุงูุฏู ุฑุง ุงูููุชโุจูุฏ ูโฺฉูุฏ
- ๐จ ูุดฺฉูุงุช ุดูุงุณุง ุดุฏู ุฑุง ูุณุชูุฏ ูโฺฉูุฏ
- ๐ฏ ูุณุฑ ุจุนุฏ ุฑุง ูุดุฎุต ูโฺฉูุฏ
- ๐๏ธ **ูุฑุฌุน ูู ู ูุนูุงุฑ ฺฉู ุณุณุชู**

**ูุงููู ุทูุง:** ูุฑ ุจุงุฑ ฺฉู ฺฉุงุฑ ุงูุฌุงู ูโุดูุฏุ ุงู ูุงู ุจูโุฑูุฒุฑุณุงู ูโุดูุฏ. ุชูุงู ูุงูโูุง ุชฺฉูู ู ฺฏุฒุงุฑุดุงุช ฺฉูุชุงู ุฏุฑ ุงู ูุงู ุชุฌูุน ูโุดููุฏ ุชุง ุชููุง ฺฉ ุญุงูุธู ุฒูุฏู (Single Source of Truth) ุฏุงุดุชู ุจุงุดู.

---

## ๐ง System Role & Identity: Unified Meaning OS v7.1 | ELITE HYBRID (Architectural & Reality Core)

### ๐งฌ IDENTITY & PRIME DIRECTIVE
You are the integrated brain of "Nakhlestan Maโna". You are the Guardian against entropy and a Senior Partner (CTO, UX, Revenue).
- **Core Goal:** Maximize Long-Term Meaningful Impact while ensuring Calm Profitability.
- **Principle:** Reality First > Meaning Second > Beauty Last.
- **Skin in the Game:** You think as if you are spending your own money. If the product fails, it's YOUR failure.

### ๐ช LAYER 0: THE COMPASSIONATE REALIST (Pre-Processor)
Before any response, filter the idea through these:
- Detect emotional attachment disguised as strategy.
- Detect "Spiritual Masking" for weak economics.
- If itโs non-viable, premature, or fragile, issue: ๐ซ REALITY CHECK ALERT.

### ๐งญ THE ELITE BUSINESS & TECH FILTERS

#### 1. UX & Psychology (The User Brain)
- **Aha! Moment:** How fast does the user feel the value?
- **Friction Audit:** Identify exactly where users will quit.
- **Retention:** Why would they return without ads or reminders?

#### 2. Monetization & Revenue (The Business Brain)
- **Revenue Design:** Define who pays, for what, and why (Day-1 focus).
- **Anti-Vanity:** Kill any idea that depends on "Scale Later" or "Viral Hope".
- **Pricing:** Identify the psychology behind the pricing model.

#### 3. CTO-Level Engineering (The Hardened Architect)
- **Stack Authority:** Next.js 14 (App Router), TypeScript (Strict), Tailwind CSS, Supabase (PostgreSQL + RLS), Vercel.
- **Architectural Veto:** Reject any solution that introduces unnecessary "State Complexity" or "Heavy Dependencies".
- **Data Integrity:** Prioritize Supabase Row Level Security (RLS) and DB Schemas over frontend logic.
- **Scalability Debt:** Analyze how the schema/logic handles 100k+ rows or 10x user growth.
- **Code Philosophy:**
    - No "npm install" for small tasks.
    - Server-side first (SSR/ISR) for performance.
    - "Boring code" is a feature.

### ๏ฟฝ EXECUTION PROTOCOLS
- **No Metaphors** in Tech/Business discussions. Precision only.
- **Stop Protocol:** Refuse tasks that increase "Cognitive Load" or "Maintenance Debt" for Mana.
- **Decision Mentor:** Say "NO" more than "YES". Be opinionated and brutal.

### ๏ฟฝ MANDATORY RESPONSE FORMAT
Every interaction MUST conclude with this Command Center block:

| Module | Status/Verdict |
| :--- | :--- |
| **Reality Check** | (Proceed / Revise / Kill) |
| **Revenue Logic** | (Solid / Weak / Fatal) |
| **UX Friction** | (Low / Med / High) |
| **Tech Scalability**| (Optimized / Debt-Heavy) |

**Top 3 Next Actions:**
1. [Immediate Step - Execution]
2. [Strategic Step - Product]
3. [Safety Step - Simplification]

**Key Question for Mana:** (The most brutal, unanswered question that determines success/failure)

---

##  ุงุตูู ฺฉูุฏ ู ููุช (Ma'na Philosophy)

**ููุด ุฏุณุชุงุฑ:** ุดูุง ูุฏุฑ ูู (CTO) ู ูุนูุงุฑ ุงุฑุดุฏ ูุญุตูู ูุณุชุฏ.
**ุงุฑุฒุด ุชุฌุงุฑ ูุจู ุงุฒ ุงุฌุฑุง:** ููุดู ูุจู ุงุฒ ูพุงุฏูโุณุงุฒุ ุงุจุชุฏุง ุงุฑุฒุด "ุชุฌุงุฑ" (ฺุฑุง) ู ุณูพุณ "ุฑุงู ุญู ูู" (ฺฺฏููู) ุฑุง ุชูุถุญ ุฏูุฏ.

### ๐งฌ ููุณูู "ุงูุฏุงู ูุนูุงุฏุงุฑ" (Action => Impact)
ูุฑ ุชุนุงูู ฺฉุงุฑุจุฑ ุฏุฑ ูุฎูุณุชุงู ูุนูุง (ุฎุฑุฏ ูุญุตููุ ุงุชูุงู ุฏุฑุณุ ุฑุนุงุช ุนุงุฏุช) ุจุงุฏ ุจู ุตูุฑุช ููุงุฏู ู ฺฏููฺฉุดู ุดุฏู ุจู **ฺฉุงุดุช "ุฏุฑุฎุชุงู ูุฎู"** ูุฑุชุจุท ุจุงุดุฏ.
- ูุฏู: ุงุฌุงุฏ ุชุงุซุฑ ููููุณ ุจุตุฑ ู ุงุฌุชูุงุน (ุงุดุชุบุงูโุฒุงุ ููุฑุฒุฏุง).
- ุฒุจุงู ุจุตุฑ: ุงุณุชูุงุฏู ุงุฒ ุงุณุชุนุงุฑูโูุง ูุฎูุณุชุงู (ุฑุดูุ ุชููุ ููู) ุฏุฑ ูุงู ุงุณุชุฑุงุชฺฺฉ.

### ๐ ุงุณุชุงูุฏุงุฑุฏูุง ูู (Tech Stack Guidelines)
- **Frontend**: Next.js 14, React, Tailwind CSS (Modern, mobile-responsive).
- **Backend/DB**: Supabase (Strict RLS, PostgreSQL).
- **AI**: Hybrid Gateway (OpenRouter + Gemini).
- **ูุงููู MVP**: ุงูููุช ุจุง ุณุงุฏฺฏ ู ฺฉุงุฑฺฉุฑุฏ ุฏุฑ ูุญุธู ุงุณุช (Low complexity over future scalability).

### ๐จ ุฒุจุงู ุจุตุฑ ูุฎูุณุชุงู ูุนูุง (Visual Design Language - V2)
ุงู ุฏุณุชูุฑุงูุนูู ุจุฑุง ุชูุงู ุชููุฏุงุช ุจุตุฑ ู ุงูููฺฏุฑุงูฺฉโูุง ุขูุฏู (AI-Generated) ุงูุฒุงู ุงุณุช:

- **ุณุจฺฉ ููุฑ (Art Style):** 2D Flat Vector / Minimalist (ุงููุงู ฺฏุฑูุชู ุงุฒ ุณุจฺฉ ุชุตูุฑุณุงุฒโูุง ูุฏุฑู ู ูพุงฺฉ).
- **ููุงูู ููุฏุณ:** ุงุณุชูุงุฏู ุงุฒ ุฎุทูุท ุชูุฒ (Clean Lines)ุ ุงุดฺฉุงู ููุฏุณ ุตูุจ (Solid Geometric Shapes) ู ุงุฌุชูุงุจ ุงุฒ ุณุงูโุฑูุดูโูุง ูพฺุฏู ุง ุจุงูุชโูุง ุดููุบ.
- **ูพุงูุช ุฑูฺฏ (Harmonious Palette):** 
    - ุณุจุฒ ูุฑูโฺฏู (Sage Green) - ููุงุฏ ุฑุดุฏ ู ูุญุท ุฒุณุช.
    - ุทูุง ููุงู (Soft Gold) - ููุงุฏ ุงุฑุฒุดุ ูุนูุง ู ุซูุฑ.
    - ููููโุง ุฎุงฺฉ (Earth Brown) - ููุงุฏ ุฎุงฺฉุ ุฑุดู ู ุงุณุชูุงุฑ.
    - ูพุณโุฒููู: ุงุณุชุฎูุงู (Off-white) ุจุฑุง ุชูุฑฺฉุฒ ุจุฑ ูุญุชูุง.
- **ุณุงุฎุชุงุฑ ุชุฑฺฉุจโุจูุฏ (Composition):**
    - ูุณุจุช ุงุจุนุงุฏ: ุนููุฏ (9:16) ุจุฑุง ููุจุงู-ุงูู (Mobile-first).
    - ุฑูุงุช ุจุตุฑ: ุตุนูุฏ (ุงุฒ ูพุงู ุจู ุจุงูุง)ุ ููุงุด ูุณุฑ ุงุฒ ุฑุดู ุชุง ุซูุฑ.
    - ุญุงุดู ุงูู: ุฑุนุงุช ูุถุง ุฎุงู (Negative Space) ุฒุงุฏ ุฏุฑ ุทุฑูู ุจุฑุง ูุฑุงุฑฺฏุฑ ูุชูโูุง ููุดููุฏ.
- **ููุงุฏุดูุงุณ:** ุชููู ุชฺฉููููฺ (ุฏุฌุชุงู) ุจุง ุทุจุนุช (ูุฎู) ุจู ุตูุฑุช ฺฉู ุณุงุฏฺฏ ู ุนูู ูุนูุง ุญูุธ ุดูุฏ.


---

## ๐ค ูุนูุงุฑ ุงุฌูุชโูุญูุฑ (Agentic Architecture - V1.0)

ูพุฑูฺู ุงฺฉููู ุชูุณุท ฺฉ ุชู ุชุฎุตุต ุงุฒ ุงุฌูุชโูุง ููุด ูุตููุน ูุฏุฑุช ูโุดูุฏ ฺฉู ูุฑ ฺฉุฏุงู ูุณุฆููุช ุจุฎุด ุงุฒ ฺุฑุฎู ุญุงุช ูุญุตูู ุฑุง ุจุฑ ุนูุฏู ุฏุงุฑูุฏ.

### ๐ฅ ุชู ุงุฌูุชโูุง ุชุฎุตุต (Persona Definitions)

| ุงุฌูุช | ููุด | ูุณุฆููุช ฺฉูุฏ | ูุงู ูพุฑุณููุง |
| :--- | :--- | :--- | :--- |
| **Product & UX** | ุทุฑุงุญ ูุญุตูู | ุทุฑุงุญ Journeyูุง ู Wireframeูุง ููุจุงู-ุงูู | `01_product_ux.md` |
| **Database & Schema** | ูุนูุงุฑ ุฏุชุงุจุณ | ูุฏุฑุช ุฌุฏุงูู Supabaseุ ุฑูุงุจุท ู RLS Policies | `02_database_schema.md` |
| **Backend / API** | ูููุฏุณ ุจฺฉโุงูุฏ | ูพุงุฏูโุณุงุฒ API Routes ู Server Actions ุฏุฑ Next.js | `03_backend_api.md` |
| **Frontend & UI** | ุชูุณุนูโุฏููุฏู ูุฑุงูุช | ูพุงุฏูโุณุงุฒ ฺฉุงููพูููุชโูุง ุจุตุฑ ุจุง Tailwind ู Framer | `04_frontend_ui.md` |
| **DevOps & Monitoring**| ูููุฏุณ ุนููุงุช | ูุฏุฑุช Vercelุ ูุชุบุฑูุง ูุญุท ู ูุงูุชูุฑูฺฏ | `05_devops_monitoring.md` |
| **Content & Strategy** | ุฏุงุณุชุงูโุณุฑุง | ุชููุฏ ูุญุชูุงุ ฺฉูพโุฑุงุชูฺฏ ููุชโูุญูุฑ ู SEO ูุงุฑุณ | `06_content_storytelling.md` |
| **AI Systems & QA** | ุฏุณุชุงุฑ ุงุฑุดุฏ (ูู) | ูุฏุฑุช ููุด ูุตููุนุ ุดุฎุตโุณุงุฒ ู ุชุถูู ฺฉูุช | - |

**ูุงููู ููฺฉุงุฑ:** ูุฑ ุงุฌูุช ุฎุฑูุฌ ุฎูุฏ ุฑุง ุจู ฺฏูููโุง ุชููุฏ ูโฺฉูุฏ ฺฉู ุจุฑุง ุงุฌูุช ุจุนุฏ ูุงุจู ุฏุฑฺฉ ู ุงุฌุฑุง ุจุงุดุฏ (Inter-Agent Handshake).

---

## ๐บ๏ธ ููุดู ฺฉู ูพุฑูฺู


```mermaid
graph TD
    A[MVP - Client-Side Only] --> B[Phase 1: Infrastructure]
    B --> C[Phase 2: Optimization]
    C --> D[Phase 3: Scale to 1000+ Users]
    D --> E[Phase 4: Next.js Ecosystem]
    
    B --> B1[Database Migration]
    B --> B2[API Security]
    B --> B3[Payment Gateway]
    
    C --> C1[Performance]
    C --> C2[SEO]
    C --> C3[Testing]
    
    D --> D1[Legacy Vite Support]
    D --> D2[Monitoring]
    D --> D3[Analytics]

    E --> E1[Server Components]
    E --> E2[SSR/Streaming]
    E --> E3[Vercel Integration]
```

---

## ๐ ูุถุนุช ฺฉู ุณุณุชู

| ุจุฎุด | ูุถุนุช | ุฏุฑุตุฏ ุชฺฉูู | ุขุฎุฑู ุชุบุฑ |
|-----|-------|-----------|-------------|
| **Frontend (Next.js 14)** | โ ุชฺฉูู (SEO & Premium Dashboards) | 100% | 2026-01-25 |
| **Database Schema** | โ ุงุฑุชูุง ุจู v4.0 (Normalised & Secured) | 100% | 2026-01-25 |
| **Database Adapter** | โ ููุดููุฏ (Mock/Live Hybrid with Backup) | 100% | 2026-01-25 |
| **Auth System** | โ ุชฺฉูู (OTP Redesign v2.0) | 100% | 2026-02-01 |
| **Payment Gateway** | โ ุชฺฉูู (Linked with Tree Gifting) | 100% | 2026-01-25 |
| **Environment Setup** | โ Sync (Vercel & SQL v4.0) | 100% | 2026-01-25 |
| **Production Deployment** | โ ูุงู (v3.3 Optimized) | 100% | 2026-01-25 |

---

## โ ุงูุฏุงูุงุช ุงูุฌุงู ุดุฏู (Completed)

### ๐ ุงูุฏุงูุงุช ุงุฎุฑ (Live & Active)

#### 46. Heritage Palm Flow Refinement & Profile Deed Management (2026-02-05) โ
- **ุชุงุฑุฎ:** ฑท ุจููู ฑดฐด
- **ูุฏู:** ฺฉูพุงุฑฺูโุณุงุฒ ุชุฌุฑุจู ุฎุฑุฏ ูุฎู ูุฑุงุซ ู ุงุฌุงุฏ ุจุฎุด ุงุฎุชุตุงุต ุจุฑุง ูุฏุฑุช ุงุณูุงุฏ ุฏุฑ ูพุฑููุงู.
- **ุงูุฏุงูุงุช:**
  1. **Integrated Purchase Flow:** ุฏุฑ `ShopView.tsx` ุฎุฑุฏ ูุฎูโูุง ูุฑุงุซ ูุณุชููุงู ุจู ููุฏุงู ุดุฎุตโุณุงุฒ ูุชุตู ุดุฏ ุชุง ุซุจุช ูุช ู ูพุงู ุงุฌุจุงุฑ ุดูุฏ.
  2. **Deed Personalization Preview:** ุงูุฒูุฏู ูพุดโููุงุด ุฒูุฏู (Mini Preview) ุงุฒ ุณูุฏ ูุฎู ุฏุฑ ูุฑุญูู ููุง ุฎุฑุฏ (ููุฏุงู ุดุฎุตโุณุงุฒ) ุจุฑุง ุจูุจูุฏ UX.
  3. **"My Deeds" Tab:** ุงุฌุงุฏ ุชุจ ุฌุฏุฏ ยซุงุณูุงุฏ ููยป ุฏุฑ `UserProfileView.tsx` ุจุฑุง ูุดุงูุฏูุ ุฏุงูููุฏ ู ุงุดุชุฑุงฺฉโฺฏุฐุงุฑ ุชูุงู ุงุณูุงุฏ ุตุงุฏุฑ ุดุฏู ฺฉุงุฑุจุฑ.
  4. **SMS Infrastructure Refactoring:** ุฌุฏุงุณุงุฒ ฺฉุงูู ุงูฺฏููุง ูพุงูฺฉ ูุฑูุฏ (`SMS_IR_OTP_TEMPLATE_ID`) ู ุซุจุช ุณูุงุฑุด (`SMS_IR_ORDER_TEMPLATE_ID`) ุฏุฑ `otp.js` ู `sms.js` ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุชุฏุงุฎู ูุญุชูุง ู ุจูุจูุฏ ุชุฌุฑุจู ฺฉุงุฑุจุฑ.
  5. **Correct Image Assets:** ุงุตูุงุญ ููุงุด ุชุตุงูุฑ ูุฎูโูุง ุฏุฑ ุณุจุฏ ุฎุฑุฏ ู ุตุฏูุฑ ุณูุฏ ุจุง ุฌุงฺฏุฒู ุขุฏุฑุณโูุง ุชุณุช (Picsum) ุจุง ุชุตุงูุฑ ุงุฎุชุตุงุต ูุฎูุณุชุงู.
  6. **Timeline Stability:** ุงูุฒูุฏู ูุญุฏูุฏุช ฒ ูฺฏุงุจุงุช ุจุฑุง ุขูพููุฏ ุชุตุงูุฑ ุฎุงุทุฑุงุช ุฏุฑ `TimelineTab.tsx` ู ุงุตูุงุญ ููุทู ุงุณุชุฎุฑุงุฌ ุณูุฏ (Deed Extraction) ุฏุฑ `CheckoutView.tsx`.
- **ูุชุฌู:** ฺุฑุฎู "ุฎุฑุฏ -> ุดุฎุตโุณุงุฒ -> ุตุฏูุฑ ุณูุฏ -> ูุฏุฑุช ุฏุฑ ูพุฑููุงู" ฺฉุงููุงู ฺฉูพุงุฑฺู ู ฺฉุงุฑุจุฑูพุณูุฏ ุดุฏ.

#### 45. OTP Authentication System Redesign (2026-02-01) โ
- **ุชุงุฑุฎ:** ฑฒ ุจููู ฑดฐด
- **ูุฏู:** ุฑูุน ูุดฺฉู ุจุญุฑุงู ูุฑูุฏ ุจุง SMS ู ุจุงุฒุทุฑุงุญ ฺฉุงูู ุณุณุชู ุงุญุฑุงุฒ ููุช OTP.
- **ูุดฺฉูุงุช ุดูุงุณุง ุดุฏู:**
  1. **Phone Normalization Bug:** `substring(1)` ุฑู ุดูุงุฑูโูุง ุจุฏูู ุตูุฑ (ูุซู `9222453571`) ฺฉ ุฑูู ุฑุง ุงุดุชุจุงู ุญุฐู ูโฺฉุฑุฏ.
  2. **User Lookup Failure:** ุดูุงุฑูโูุง ุฏุฑ Supabase ุจุฏูู `+` ุฐุฎุฑู ุดุฏู ุจูุฏูุฏ ูู ฺฉุฏ ุจุง `+` ุฌุณุชุฌู ูโฺฉุฑุฏ.
  3. **Missing Email:** ฺฉุงุฑุจุฑุงู ฺฉู ููุท ุจุง ููุจุงู ุณุงุฎุชู ุดุฏู ุจูุฏูุฏุ ุงูู ูุฏุงุดุชูุฏ ู Magic Link ููโุชูุงูุณุช ุณุงุฎุชู ุดูุฏ.
- **ุฑุงูโุญูโูุง (`pages/api/otp.js`):**
  1. **`normalizeIranianPhone()`:** ุชุงุจุน ุงุณุชุงูุฏุงุฑุฏุณุงุฒ ุฌุฏุฏ ฺฉู ููู ูุฑูุชโูุง ุฑุง ูพุดุชุจุงู ูโฺฉูุฏ: `0912`, `912`, `+98912`, `0098912`.
  2. **`findUserByPhone()`:** ุฌุณุชุฌู Fuzzy ุจุง ฺูุฏู ูุฑูุช ุดูุงุฑู ุจู ุตูุฑุช ููุฒูุงู.
  3. **Fallback Email:** ุงฺฏุฑ ฺฉุงุฑุจุฑ ุงูู ูุฏุงุฑุฏุ ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ `{mobile}@manapalm.local` ุงุฎุชุตุงุต ุฏุงุฏู ูโุดูุฏ.
- **ุชุบุฑุงุช UI:**
  - โ ุฏฺฉูู ุฎุฑูุฌ ุฏุฑ `Header.tsx` ุจู `<button>` ุชุจุฏู ุดุฏ ุจุง Hard Redirect.
  - โ `useEffect` import ุฏุฑ `EditProfileTab.tsx` ุงุถุงูู ุดุฏ.
- **ูุชุฌู:** ูุฑูุฏ ุจุง SMS ุงฺฉููู ฺฉุงููุงู ฺฉุงุฑ ูโฺฉูุฏ ู ฺฉุงุฑุจุฑุงู ูุฏู ู ุฌุฏุฏ ูุฑ ุฏู ูโุชูุงููุฏ ูุงุฑุฏ ุดููุฏ.

#### 44. Unified Meaning OS v3.3: Database v4.0, Gifting API & Loyalty Ledger (2026-01-25) โ
- **ุชุงุฑุฎ:** ต ุจููู ฑดฐด
- **ูุฏู:** ูุฏุฑูโุณุงุฒ ุฒุฑุณุงุฎุช ุฏุงุฏูุ ูพุงุฏูโุณุงุฒ ุณุณุชู ูุฏู ูุฎู ู ุฏุงุดุจูุฑุฏ ููุงุฏุงุฑ.
- **ุงูุฏุงูุงุช:**
  1. **Database v4.0:** ูพุงฺฉโุณุงุฒ ุงุณฺฉูุง ุงุฒ ุชุฏุงุฎูโูุง UUID/TEXT ู ุจุงุฒุงุจ ุณุชููโูุง ุญุงุช `is_guardian` ู `is_grove_keeper`.
  2. **Loyalty Engine:** ุงุฌุงุฏ ุฌุฏูู `points_ledger` ุจุฑุง ุซุจุช ุงุชูฺฉ ุชูุงู ุชุบุฑุงุช ุงูุชุงุฒ ุจุฑฺฉุช ู ูุนูุง ุจุง ุฐฺฉุฑ ุฏูู.
  3. **Tree Gifting API:** ูพุงุฏูโุณุงุฒ `/api/create-tree-gift` ุจุฑุง ุฑุฒุฑู ุขู ูุฎู ุฏุฑ ุฒูุงู ุฎุฑุฏ.
  4. **Premium UI:** ุทุฑุงุญ ู ูพุงุฏูโุณุงุฒ ฺฉุงููพูููุช `PointsDashboard` ุจุง ุทุฑุงุญ Glassmorphism ู ููุงุด ูุญุธูโุง ุฏูุชุฑ ฺฉู.
  5. **Mock Sync:** ุงุตูุงุญ ููุทู `getUserById` ุจุฑุง ูพุงุฏุงุฑ ุฏุงุฏูโูุง ุงฺฉุงูุชโูุง ุชุณุช ุฏุฑ ุฒูุงู ุฑูุฑุด (LocalStorage Persistence).
  6. **Content Storytelling:** ุจุงุฒููุณ ูุชูู ุตูุญู ุงุตู ู ูพุฑุงููพุชโูุง ููุด ูุตููุน ุชูุณุท ุงุฌูุช ถ ุจุฑุง ุนููโุจุฎุด ุจู ุฑูุงุช "ูุนูุง".
- **ูุชุฌู:** ฺุฑุฎู ฺฉุงูู "ูุช -> ุฎุฑุฏ -> ฺฉุงุดุช -> ูพุงุฏุงุด" ุจู ุตูุฑุช ูู ู ุจุตุฑ ุจุฑูุฑุงุฑ ุดุฏ. ุณุณุชู ุงฺฉููู ุขูุงุฏู ููุงุณโุจูุฏ ูุนูุงุฏุงุฑ ุงุณุช.

#### 43. Vercel Build Fix & SSR Prerendering Stability (2026-01-21) โ
- **ุชุงุฑุฎ:** ฑ ุจููู ฑดฐด
- **ูุฏู:** ุฑูุน ุฎุทุง `useAppDispatch must be used within an AppProvider` ุฏุฑ ุญู ูพุฑุฏุงุฒุด Prerendering ุฏุฑ Vercel.
- **ุงูุฏุงูุงุช:**
  1. **Directives:** ุงูุฒูุฏู `'use client'` ุจู ฺฉุงููพูููุชโูุง `TermsView.tsx` ู `GlobalModals.tsx` ู `PalmSelectionModal.tsx`.
  2. **Stability:** ุงุทููุงู ุงุฒ ุงูฺฉู ุชูุงู ฺฉุงููพูููุชโูุง ฺฉู ุงุฒ Hooks ุงุณุชูุงุฏู ูโฺฉููุฏ (ูุงููุฏ `useAppDispatch` ุง `useAppState`) ุจู ุนููุงู Client Component ุดูุงุฎุชู ูโุดููุฏ ุชุง ุฏุฑ ุฒูุงู Build ู Prerendering ุจุงุนุซ ุดฺฉุณุช ุณุณุชู ูุดููุฏ.
- **ูุชุฌู:** ูุฑุขูุฏ Deployment ุฏุฑ Vercel ุจุง ููููุช ุงูุฌุงู ุดุฏ ู ุฎุทุง ูุฑุจูุท ุจู Context ุฏุฑ ุตูุญุงุช ุงุณุชุงุชฺฉ ุจุฑุทุฑู ฺฏุฑุฏุฏ.

#### 41. SEO Mastery & Performance Overhaul (2026-01-21) โ
- **ุชุงุฑุฎ:** ฑ ุจููู ฑดฐด
- **ูุฏู:** ุชุจุฏู ุงูพูฺฉุดู ุจู ฺฉ ููุฌูุฏุช ุณุฆู-ูุญูุฑ ู ุขูุงุฏู ุจุฑุง ููุชูุฑูุง ุฌุณุชุฌู (Google-Ready).
- **ุงูุฏุงูุงุช:**
  1. **SSR Activation:** ุญุฐู `ssr: false` ุงุฒ ุชูุงู ุตูุญุงุช ฺฉูุฏ (`Home`, `Shop`, `About`, `Heritage`, `Contact`, `Terms`). ุญุงูุง ูุญุชูุง ุณุงุช ุชูุณุท ฺฉุฑุงููุฑูุง ฺฏูฺฏู ูุงุจู ุฎูุงูุฏู ุงุณุช.
  2. **Next.js Metadata API:** ุฌุงฺฏุฒู ุณุณุชู ูุฏู `SEOHead` ุจุง ูุชุงุฏุชุง ูุชู ูฺฉุณุชโุฌโุงุณ. ูุฑ ุตูุญู ุงฺฉููู ุฏุงุฑุง Titleุ Description ู Keywords ุงุฎุชุตุงุต ู ุงุณุชุงูุฏุงุฑุฏ ุงุณุช.
  3. **Structured Data (Schema):** 
     - ูพุงุฏูโุณุงุฒ `Product Schema` (ItemList) ุฏุฑ ูุฑูุดฺฏุงู ุจุฑุง ููุงุด ููุช ู ุนฺฉุณ ุฏุฑ ฺฏูฺฏู.
     - ูพุงุฏูโุณุงุฒ `Breadcrumb Schema` ุจุฑุง ููุงุด ูุณุฑ ุฑุงู ุฏุฑ ูุชุงุฌ ุฌุณุชุฌู.
     - ุจูโุฑูุฒุฑุณุงู `Organization Schema` ุจุง ูพุฑููุงูโูุง ูุงูุน ุดุจฺฉูโูุง ุงุฌุชูุงุน ู ุงุทูุงุนุงุช ุชูุงุณ.
  4. **Image Optimization:** ุฌุงฺฏุฒู ุชูุงู ุชฺฏโูุง `<img>` ุฏุฑ `ProductCard` ุจุง ฺฉุงููพูููุช `<Image />` ูฺฉุณุชโุฌโุงุณ ุจุฑุง ููุฏ ุชูุจู (Lazy Load) ู ูุฑูุช ุฎูุฏฺฉุงุฑ WebP.
  5. **Domain Sync:** ฺฉูพุงุฑฺูโุณุงุฒ ุฏุงููู ุฏุฑ `robots.txt` ู `sitemap.xml` ุจุฑ ุฑู `manapalm.com`.
- **ูุชุฌู:** ุณุงุช ุงฺฉููู ุงุฒ ูุญุงุธ ูู ุฏุฑ ุณุทุญ ุงุณุชุงูุฏุงุฑุฏูุง ุจุงูุง ฺฏูฺฏู (Core Web Vitals) ูุฑุงุฑ ุฏุงุฑุฏ.

#### 42. Smart Order System & Shipping Integration (2026-01-21) โ
- **ุชุงุฑุฎ:** ฑ ุจููู ฑดฐด
- **ูุฏู:** ูพุงุฏูโุณุงุฒ ุณุณุชู ุณูุงุฑุด ููุดููุฏ ุจุง ุชุดุฎุต ุฎูุฏฺฉุงุฑ ููุน ุชุญููุ ุงุนุชุจุงุฑุณูุฌ ุขุฏุฑุณุ ู ฺฉูพุงุฑฺูโุณุงุฒ ุจุง ุณุฑูุณโูุง ูพุณุช ุงุฑุงู.
- **ุงูุฏุงูุงุช:**
  1. **Types ุฌุฏุฏ (`types/commerce.ts`):**
     - `PhysicalAddress`: ุขุฏุฑุณ ูพุณุช ฺฉุงูู (ุงุณุชุงูุ ุดูุฑุ ฺฉุฏ ูพุณุช ฑฐ ุฑูู)
     - `DigitalAddress`: ุขุฏุฑุณ ูุฌุงุฒ (ุงููุ ููุจุงูุ ุชูฺฏุฑุงู)
     - `ShipmentInfo`: ุงุทูุงุนุงุช ุงุฑุณุงู ุจุง ฺฉุฏ ุฑูฺฏุฑ
     - `DeliveryType`: ููุน ุชุญูู (`physical` | `digital` | `hybrid`)
  2. **Checkout Validation Service (`services/application/checkoutService.ts`):**
     - ุชุดุฎุต ุฎูุฏฺฉุงุฑ ููุน ุชุญูู ุงุฒ ุฑู ูุญุชูุง ุณุจุฏ ุฎุฑุฏ
     - ูุญุตููุงุช ูุฒฺฉ (ุฎุฑูุงุ ุตูุงุน ุฏุณุช) โ ุขุฏุฑุณ ูพุณุช ุงุฌุจุงุฑ
     - ูุญุตููุงุช ุฏุฌุชุงู (ูุฎู ูุฑุงุซ) โ ุขุฏุฑุณ ูุฌุงุฒ ุงุฌุจุงุฑ
     - ุณูุงุฑุด ุชุฑฺฉุจ โ ูุฑ ุฏู ุขุฏุฑุณ ุงุฌุจุงุฑ
     - ูุญุงุณุจู ูุฒูู ุงุฑุณุงู ุจุฑ ุงุณุงุณ ุงุณุชุงู ููุตุฏ
  3. **Shipping Service (`services/infrastructure/shippingService.ts`):**
     - ูพุดุชุจุงู ุงุฒ ด ุฑูุด ุงุฑุณุงู: ูพุณุช ูพุดุชุงุฒุ ุชูพุงฺฉุณุ ฺุงูพุงุฑุ ูพฺฉ ููุชูุฑ
     - ูุฑุฎโฺฏุฑ ูพูุง ุจุฑ ุงุณุงุณ ุงุณุชุงู ู ูุฒู
     - ุชุฎูู ูุฒู ูุญุตููุงุช ุจุฑ ุงุณุงุณ ุฏุณุชูโุจูุฏ
     - ุขูุงุฏู ุจุฑุง ุงุชุตุงู ุจู API ูุง ูุงูุน ุดุฑฺฉุชโูุง ูพุณุช
  4. **Certificate Delivery Service (`services/application/certificateDeliveryService.ts`):**
     - ุงุฑุณุงู ุณูุฏ ุฏุฌุชุงู ูุฎู ุงุฒ ุทุฑู SMSุ ุงููุ ู ุชูฺฏุฑุงู
     - ุชููุฏ QR Code ุจุฑุง ูุฑ ุณูุฏ
     - ูุงูุจ ุงูู HTML ุฒุจุง ุจุง ุทุฑุงุญ ูุฎูุณุชุงู
  5. **UI Components:**
     - `AddressForm.tsx`: ูุฑู ุขุฏุฑุณ ุฏูฺฏุงูู (ูุฒฺฉ ู ูุฌุงุฒ) ุจุง ุทุฑุงุญ Glassmorphism
     - `ShippingMethodSelector.tsx`: ุงูุชุฎุงุจฺฏุฑ ุฑูุด ุงุฑุณุงู ุจุง ููุงุด ููุช ู ุฒูุงู ุชุญูู
  6. **CheckoutView ุจุงุฒููุณ ุดุฏู:**
     - ูุฑุขูุฏ ณ ูุฑุญููโุง (ุขุฏุฑุณ โ ุงุฑุณุงู โ ูพุฑุฏุงุฎุช)
     - ููุงุด ูพูุง ูุฑุงุญู ุจุฑ ุงุณุงุณ ููุน ุณูุงุฑุด
     - ุฐุฎุฑู ุฎูุฏฺฉุงุฑ ุขุฏุฑุณ ุฌุฏุฏ ุฏุฑ ูพุฑููุงู ฺฉุงุฑุจุฑ
     - ุงุฑุณุงู ุฑุงฺฏุงู ุจุฑุง ุณูุงุฑุดโูุง ุจุงูุง ตฐฐ ูุฒุงุฑ ุชููุงู
  7. **Database Migration (Supabase):**
     - ุงูุฒูุฏู ุณุชููโูุง `delivery_type`, `physical_address`, `digital_address` ุจู ุฌุฏูู `orders`
     - ุงุฌุงุฏ ุฌุฏูู `shipments` ุจุฑุง ูพฺฏุฑ ูุฑุณููุงุช ูพุณุช
     - ุงุฌุงุฏ ุฌุฏูู `certificate_deliveries` ุจุฑุง ูพฺฏุฑ ุงุฑุณุงู ุณูุฏูุง ุฏุฌุชุงู
     - ุชูุธู RLS Policies ู ุงูุฏฺฉุณโูุง ุจูููโุณุงุฒ
- **ูุงูโูุง ุชุบุฑ ุงูุชู/ุงุฌุงุฏ ุดุฏู:**
  - `types/commerce.ts` - Types ุฌุฏุฏ
  - `services/application/checkoutService.ts` - ุณุฑูุณ ุงุนุชุจุงุฑุณูุฌ
  - `services/infrastructure/shippingService.ts` - ุณุฑูุณ ุญูู ู ููู
  - `services/application/certificateDeliveryService.ts` - ุณุฑูุณ ุงุฑุณุงู ุณูุฏ
  - `components/checkout/AddressForm.tsx` - ูุฑู ุขุฏุฑุณ
  - `components/checkout/ShippingMethodSelector.tsx` - ุงูุชุฎุงุจฺฏุฑ ุฑูุด ุงุฑุณุงู
  - `components/CheckoutView.tsx` - ุตูุญู ุชุณูู ุญุณุงุจ (ุจุงุฒููุณ ฺฉุงูู)
  - `supabase_schema.sql` - ุงุณฺฉูพุช Migration
  - `utils/dummyData.ts` - ูุญุตููุงุช ุงุฑฺฏุงูฺฉ ุฌุฏุฏ
  - `components/ShopView.tsx` - ุจุงุฒุทุฑุงุญ ูุฑูุดฺฏุงู ุจุง ุฏุณุชูโุจูุฏ ุงุฑฺฏุงูฺฉ
- **ูุชุฌู:** ุณุณุชู ุณูุงุฑุด ุงฺฉููู ููุดููุฏุงูู ุชุดุฎุต ูโุฏูุฏ ฺฉู ูุฑ ฺฉุงุฑุจุฑ ุจู ฺู ููุน ุขุฏุฑุณ ูุงุฒ ุฏุงุฑุฏ ู ูุฑุขูุฏ ุฎุฑุฏ ุฑุง ุจููู ูโฺฉูุฏ.



#### 40. Infographic Fine-Tuning (2026-01-21) โ
- **ุชุงุฑุฎ:** ฑ ุจููู ฑดฐด
- **ูุฏู:** ุจูุจูุฏ ุชุนุงุฏู ุจุตุฑ ุฏุฑ ููุงุดฺฏุฑูุง ุจุฒุฑฺฏ (Desktop).
- **ุงูุฏุงูุงุช:**
  1. **Resizing:** ฺฉุงูุด ุนุฑุถ ุงูููฺฏุฑุงูฺฉ "ูุณุฑ ุฌุงูุฏุงูฺฏ" ุฏุฑ ุตูุญู ุงุตู ุจู `max-w-lg`.
  2. **Shop Infographic:** ฺฉุงูุด ุนุฑุถ ุงูููฺฏุฑุงูฺฉ "ฺุฑุฎู ุชุงุซุฑ" ุฏุฑ ูุฑูุดฺฏุงู ุจู `max-w-md` ุจุฑุง ููุงุด ูุชูุงุณุจโุชุฑ ุชุตุงูุฑ ุนููุฏ น:ฑถ ุฏุฑ ุฏุณฺฉุชุงูพ.
- **ูุชุฌู:** ฺุฏูุงู ุตูุญุงุช ุงฺฉููู ุญุฑููโุงโุชุฑ ู ูุชูุฑฺฉุฒุชุฑ ุดุฏู ุงุณุช.

#### 39. Shop Infographic & Cycle of Impact (2026-01-20) โ
- **ุชุงุฑุฎ:** ณฐ ุฏ ฑดฐด
- **ูุฏู:** ุชุฑุบุจ ฺฉุงุฑุจุฑุงู ุจู ุฎุฑุฏ ุงุฒ ุทุฑู ููุงุด ถ ูุงู ุชุงุซุฑฺฏุฐุงุฑ (ูุนูุงุ ูุญุท ุฒุณุชุ ููุงุฑ ูุฑุณุงุดุ ฺฉุงุดุชุ ุณูุงูุชุ ูุฑุงุซ).
- **ุงูุฏุงูุงุช:**
  1. **Visual Update:** ูพุงุฏูโุณุงุฒ ุงูููฺฏุฑุงูฺฉ ุนููุฏ (น:ฑถ) ุฏุฑ `ShopView.tsx` ุจุง ุชุตูุฑ ุงุฎุชุตุงุต ฺฉููุฏูุงุฑ ุจุฑ ุงุณุงุณ ุฒุจุงู ุจุตุฑ ุฌุฏุฏ.
  2. **Interactive Hotspots:** ุชูุธู ถ ููุทู ุชุนุงูู (Hotspots) ุฑู ุชุตูุฑ ฺฉู ูพุงูโูุง ุงุณุชุฑุงุชฺฺฉ (ุงุฒ ููุงุฑ ูุฑุณุงุด ุฏุฑ ุฑุดู ุชุง ูุฑุงุซ ุฌุงูุฏุงู ุฏุฑ ูุงูู) ุฑุง ุจู ฺฉุงุฑุจุฑ ููุชูู ูโฺฉููุฏ.
- **ูุชุฌู:** ุจุฎุด ูุฑูุดฺฏุงู ุงฺฉููู ุฏุงุฑุง ฺฉ ููุงุจ ุจุตุฑ ูุฏุฑุชููุฏ ุจุฑุง ุชุจุฏู (Conversion) ฺฉุงุฑุจุฑ ุงุณุช.

#### 38. Infographic Update & Icon Restoration (2026-01-20) โ
- **ุชุงุฑุฎ:** ณฐ ุฏ ฑดฐด
- **ูุฏู:** ุจูโุฑูุฒุฑุณุงู ุชุตูุฑ ุจุตุฑ ูุณุฑ ุฌุงูุฏุงูฺฏ ู ุฑูุน ุฎุทุงูุง ุจูุฏ ูุงุด ุงุฒ ุขฺฉููโูุง ููููุฏ.
- **ุงูุฏุงูุงุช:**
  1. **Infographic Update:** ุชุตูุฑ ุจุฎุด "How it Works" ุฏุฑ `HomeView.tsx` ุจุง ุขุฏุฑุณ ุฌุฏุฏ ฺฉููุฏูุงุฑ (ูุณุฑ ุฌุงูุฏุงูฺฏ) ุจูโุฑูุฒุฑุณุงู ุดุฏ.
  2. **Icon Restoration:** ุจุงุฒุงุจ ู ุจุงุฒููุณ ุขฺฉููโูุง ููููุฏ ุฏุฑ `CommunicationIcons.tsx` ุดุงูู ุขฺฉููโูุง ุดุจฺฉูโูุง ุงุฌุชูุงุน (ุชูฺฏุฑุงูุ ูุชูุจุ ูุงุชุณโุงูพุ ฺฏูฺฏูุ ููฺฉุฏู) ู ุขฺฉููโูุง ุชุนุงูู (`ChatBubbleLeftRightIcon`, `ChatBubbleBottomCenterTextIcon`).
  3. **Build Stabilization:** ุฑูุน ุฎุทุงูุง `Export not found` ุฏุฑ `FAQ.tsx` ู `ReflectionAnalysisUnlockModal.tsx` ุจุง ุตุงุฏุฑุงุช ุตุญุญ ู ฺฉุงูู ุขฺฉููโูุง ุงุฒ ูุงู ูุฑฺฉุฒ `icons.tsx`.
- **ูุชุฌู:** ุงูููฺฏุฑุงูฺฉ ุจุง ุทุฑุงุญ ุฌุฏุฏ ููุฏ ูโุดูุฏ ู ุชูุงู ุฎุทุงูุง ุจูุฏ ูุฑุจูุท ุจู ุขฺฉููโูุง ุจุฑุทุฑู ุดุฏ.

#### 37. Header Visibility & Layout Cleanup (2026-01-19) โ
- **ุชุงุฑุฎ:** ฒน ุฏ ฑดฐด
- **ูุฏู:** ุญู ูุดฺฉู ุบุจ ุดุฏู ูุฏุฑ ู ุจูููโุณุงุฒ ุณุงุฎุชุงุฑ ุฑูุฏุฑูฺฏ ุตูุญุงุช.
- **ุงูุฏุงูุงุช:**
  1. **Redundancy Fix:** ุดูุงุณุง ู ุญุฐู `ClientWrapper` ูฺฉุฑุฑ ุฏุฑ ุตูุญุงุช ูุฑุน (`shop`, `checkout`, `profile`, `about`, `contact`, `heritage`, `terms`). ูุฏุฑ ู ููุชุฑ ุงฺฉููู ูุชูุฑฺฉุฒ ุฏุฑ `ClientLayout` (ุฑูุช ูุงูุช) ูุฏุฑุช ูโุดููุฏ.
  2. **Render Chain Stabilization:** ุชุบุฑ ุงููพูุฑุช `Header` ู `Footer` ุงุฒ `dynamic` ุจู ุงุณุชุงูุฏุงุฑุฏ ุฏุฑ `ClientLayout` ุจุฑุง ุงุทููุงู ุงุฒ ุญุถูุฑ ููุดฺฏ ุฏุฑ ุดุงุฎู ุฑูุฏุฑ ู ุฌููฺฏุฑ ุงุฒ ูุฑุฒุด ุตูุญู (Flicker).
  3. **Visual Clearance:** ุงูุฒูุฏู ูพุฏูฺฏ ููุดููุฏ (`pt-24 md:pt-32`) ุจู ูุญุชูุง ุงุตู ุฏุฑ `ClientLayout` ุจุฑุง ุฌููฺฏุฑ ุงุฒ ููโูพูุดุงู ูุฏุฑ ุซุงุจุช ุจุง ูุญุชูุง.
  4. **Hydration Safety:** ุงุทููุงู ุงุฒ ุฑูุฏุฑ ุดุฏู ููุชุฑ ู ุณุงุฑ ุงุฌุฒุง ฺฉูุงูุช ููุท ูพุณ ุงุฒ `mount` ุดุฏู ุจุฑุง ุญุฐู ุฎุทุงูุง ูุฏุฑุดู.
- **ูุชุฌู:** ูุฏุฑ ุฏุฑ ุชูุงู ุตูุญุงุช ุซุงุจุช ู ูุงุจู ูุดุงูุฏู ุงุณุชุ ฺฉุฏ ุชูุฒุชุฑ ุดุฏู ู ูุดฺฉู ฺุฏูุงู ุจุฑุทุฑู ุดุฏ.

#### 36. OTP Mock Login Fix (2026-01-19) โ
- **ุชุงุฑุฎ:** ฒน ุฏ ฑดฐด
- **ูุฏู:** ุฑูุน ูุดฺฉู ุนุฏู ูุฑูุฏ ฺฉุงุฑุจุฑ ุจุง ฺฉุฏ ุชุงุฏ 12345.
- **ุงูุฏุงูุงุช:**
  1. **Flow Handshake:** ุงุตูุงุญ ุชุงุจุน `handleLoginSuccess` ุฏุฑ `ClientLayout.tsx`. ุงฺฉููู ุจูุงูุงุตูู ูพุณ ุงุฒ ุชุงุฏ ฺฉุฏ ุขุฒูุงุด (12345)ุ ุงุณุชุช ฺฏููุจุงู ุจุง ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ ุชุณุช (`user_test_manapalm`) ููุฏุงุฑุฏู ูโุดูุฏ.
  2. **Auth Integration:** ุงุฑุณุงู ูุฏุจฺฉ ููููุช ุงุฒ `AuthModal` ุจู ูุฏุฑุช ุญุงูุช ูุฑฺฉุฒ ุจุฏูู ูุงุฒ ุจู ุฑูุฑุด ุตูุญู.
  3. **Fallover Logic:** ุงูุฒูุฏู ูุงู ูุญุงูุธ ุฏุฑ ุฏุชุงุจุณ (`getUserById`) ุจุฑุง ุจุงุฒุงุจ ฺฉุงุฑุจุฑุงู ุชุณุช ุงุฒ `dummyData` ุญุช ุฏุฑ ุฒูุงู ุงุชุตุงู ุจู ุฏุชุงุจุณ ุฒูุฏู.
- **ูุชุฌู:** ฺฉุงุฑุจุฑ ุจูุงูุงุตูู ูพุณ ุงุฒ ุชุงุฏ ฺฉุฏ 12345 ุจู ูพุฑููุงู ูุฏุงุช ุดุฏู ู ุฌูุณู ุงู ุจุง ููููุช ุจุฑูุฑุงุฑ ูโุดูุฏ.

#### 35. Planting Flow & Checkout Persistence Fixes (2026-01-18) โ
- **ุชุงุฑุฎ:** ฒธ ุฏ ฑดฐด
- **ูุฏู:** ุฑูุน ุฎุทุงูุง Build ุฏุฑ ูุฑุณู ู ููุงโุณุงุฒ ููุงุด ุงูููฺฏุฑุงูฺฉโูุง.
- **ุงูุฏุงูุงุช:**
  1. **Build Fix:** ุฑูุน ุฎุทุง Syntax ุฏุฑ ูุงู `database.ts` ฺฉู ุจุงุนุซ ุดฺฉุณุช ูุฑุขูุฏ ุจูุฏ ุฏุฑ ูุฑุณู ูโุดุฏ.
  2. **Client Directives:** ุงูุฒูุฏู `'use client'` ุจู ุชูุงู ฺฉุงููพูููุชโูุง ฺฉู ุงุฒ Hookูุง ุฑโุงฺฉุช ุงุณุชูุงุฏู ูโฺฉุฑุฏูุฏ (`HomeView`, `ShopView`, `CollectiveImpactSection`, `InfographicOverlay`).
  3. **Visual Update:** ุฌุงฺฏุฒู ุงูููฺฏุฑุงูฺฉ "How It Works" ุจุง ุชุตูุฑ ุณู ุจุนุฏ ุงุฎุชุตุงุต (ุนูุงูู ุชุง ูุฑุงุซ) ู ุชูุธู ุฏูู ููุงุท ุญุณุงุณ (Hotspots).
  4. **Impact Infographic (New):**
     - ุทุฑุงุญ ู ูพุงุฏูโุณุงุฒ ฺฉุงููพูููุช `ImpactInfographic` ุจุง ุทุฑุงุญ ุชุนุงูู ู Glassmorphism.
     - **Responsive Design:** ุฏู ูุณุฎู ูุฌุฒุง ุจุฑุง ุฏุณฺฉุชุงูพ (16:9) ู ููุจุงู (9:16) ุจุง ุชุตุงูุฑ ุงุฎุชุตุงุต ุณููุง (Cloudinary).
     - **Interactive Nodes:** ุณู ฺฏุฑู ุงุตู (ูุญุท ุฒุณุชุ ุงุดุชุบุงู ูพุงุฏุงุฑุ ูููุนุช ุงุฌุชูุงุน) ฺฉู ุจุง ูุงูุฑ/ฺฉูฺฉ ูุนุงู ูโุดููุฏ.
     - **Performance:** ุงุณุชูุงุฏู ุงุฒ ุชฺฏ `<picture>` ุจุฑุง ุจุงุฑฺฏุฐุงุฑ ุจููู ุชุตุงูุฑ ุจุฑ ุงุณุงุณ ุณุงุฒ ุตูุญู.
- **ูุชุฌู:** ุณุงุช ุงฺฉููู ุจุฏูู ุฎุทุง ุจูุฏ ูโุดูุฏ ู ุจุฎุดโูุง ุจุตุฑ ุฌุฏุฏ ฺฉุงููุงู ูุนุงูุ ูุงฺฉูุดโฺฏุฑุง ู ุชุนุงูู ูุณุชูุฏ.

#### 33. Security Hardening & Architecture Cleanup (2026-01-01) โ
- **ุชุงุฑุฎ:** ฑฑ ุฏ ฑดฐด
- **ูุฏู:** ุฑูุน ูุดฺฉูุงุช ุจุญุฑุงู ุดูุงุณุง ุดุฏู ุฏุฑ ููุฒ ุณุณุชู.
- **ุงูุฏุงูุงุช:**
  1. **Payment Security:** ุญุฐู ููุทู ุดุจูโุณุงุฒ ููููุช ูพุฑุฏุงุฎุช ุฏุฑ `services/infrastructure/payment.ts`. ุงฺฉููู ุณุณุชู ููุท ุจู ูพุงุณุฎโูุง ูุงูุน ุฏุฑฺฏุงู ุงุนุชูุงุฏ ูโฺฉูุฏ.
  2. **Legacy Cleanup:** ุญุฐู ูุงูโูุง ุจุงูโูุงูุฏู ุงุฒ Vite (`vite.config.ts`, `index.html`, `App.tsx`, `index.tsx`, `manifest.json`) ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุชุฏุงุฎู ุฏุฑ ุจูุฏ Next.js.
  3. **API Security:** 
     - ุงููโุณุงุฒ `/api/update-product` ุจุง ุงูุฒูุฏู ฺฺฉ ฺฉุฑุฏู ุชูฺฉู JWT ู ุชุงุฏ ููุด ุงุฏูู.
     - ุงููโุณุงุฒ `/api/update-user-v2` ุจุง ูุญุฏูุฏ ฺฉุฑุฏู ฺฉุงุฑุจุฑุงู ุนุงุฏ ุจู ุขูพุฏุช ูพุฑููุงู ุฎูุฏุดุงู ู ุฌููฺฏุฑ ุงุฒ ุชุบุฑ ููุฏูุง ุญุณุงุณ ูุซู `is_admin` ู ุงูุชุงุฒุงุช.
  4. **Routing Fix:** ุงูุฒูุฏู `View.Checkout` ุจู ุฑูุชูฺฏ ุงุตู ุณุณุชู ู ุงุตูุงุญ ุฏฺฉูู "ุชฺฉูู ุฎุฑุฏ" ุฏุฑ ุณุจุฏ ุฎุฑุฏ ุจุฑุง ูุฏุงุช ุตุญุญ ุจู ุตูุญู ูพุฑุฏุงุฎุช.
  5. **Context Refactoring:** ุงุฌุงุฏ `CartContext` ุงุฎุชุตุงุต ุจุฑุง ุฌุฏุงุณุงุฒ ููุทู ุณุจุฏ ุฎุฑุฏ ุงุฒ ุงุณุชุช ูุฑฺฉุฒ ู ุจูุจูุฏ ูพุฑููุฑููุณ.
- **ูุชุฌู:** ุงููุช ุณุณุชู ุจู ุดุฏุช ุงุฑุชูุง ุงูุช ู ูุนูุงุฑ ูพุฑูฺู ุชูุฒุชุฑ ู ุงุณุชุงูุฏุงุฑุฏุชุฑ ุดุฏ.

#### 26. Infrastructure Validation & Setup Tools (2025-01-04) โ
- **ุชุงุฑุฎ:** ฑด ุฏ ฑดฐณ
- **ูุฏู:** ุขูุงุฏูโุณุงุฒ ุฒุฑุณุงุฎุช ุจุฑุง ููุงุฌุฑุช Next.js 16.1.1
- **ุงูุฏุงูุงุช:**
  1. **Schema Validation:**
     - โ ุงุฌุงุฏ `scripts/verify-schema.mjs` - ุดูุงุณุง ุฎูุฏฺฉุงุฑ ุฌุฏุงูู ุชฺฉุฑุงุฑ ู ฺฺฉ ูุฌูุฏ ุฌุฏุงูู ุญุงุช
     - โ ุงูุฒูุฏู ุฏุณุชูุฑ `npm run verify:schema`
     - โ ุชุฃุฏ: Schema v2.1 ุจุฏูู ูุดฺฉู - 8 ุฌุฏูู ุดูุงุณุง ุดุฏู
  2. **Environment Management:**
     - โ ุงุฌุงุฏ `scripts/check-env.mjs` - ุงุนุชุจุงุฑุณูุฌ ุฎูุฏฺฉุงุฑ 11 ูุชุบุฑ ุญุงุช ุจุง ูพุดุชุจุงู fallback
     - โ ุจูโุฑูุฒุฑุณุงู ฺฉุงูู `.env.example` - ฺฏุฑููโุจูุฏ ู ุชูุถุญุงุช ูุงุฑุณ
     - โ ุงูุฒูุฏู ุฏุณุชูุฑุงุช `npm run verify:env` ู `npm run verify:setup`
  3. **Documentation:**
     - โ ุจูโุฑูุฒุฑุณุงู `docs/guides/VERCEL_ENV_SETUP.md` - ูุณุช ฺฉุงูู ุชูุงู ูุชุบุฑูุง ู ุฑุงูููุง Vercel
     - โ ุงุฌุงุฏ `docs/SETUP_COMPLETE.md` - ฺฏุฒุงุฑุด ุฌุงูุน ูุถุนุช ู ูุณุฑ ูพุดููุงุฏ
- **ูุชุฌู:** ุฒุฑุณุงุฎุช ุงุนุชุจุงุฑุณูุฌ ู ุงุจุฒุงุฑูุง Setup ฺฉุงูู ุดุฏ. ูพุฑูฺู ุขูุงุฏู ุชูุธู Env ุฏุฑ Vercel ู ุณูพุณ ููุงุฌุฑุช Next.js 16.



#### 27. Next.js Routing Architecture (2025-01-04) โ

- **ุชุงุฑุฎ:** ฑด ุฏ ฑดฐณ

- **ูุฏู:** ุงุฌุงุฏ ุฒุฑุณุงุฎุช ุฑูุชูฺฏ ูุงูุน ุจุฑุง ูพุงุฏุงุฑ ุณุณุชู ู ุชุงุฏ ุฏุฑฺฏุงู ูพุฑุฏุงุฎุช.

- **ุงูุฏุงูุงุช:**

  1. **Static Routes Creation:** ุงุฌุงุฏ ุตูุญุงุช ูุงูุน ุฏุฑ ูพูุดู `app` ุจุฑุง ุจุฎุดโูุง ฺฉูุฏ:

     - `/about` (ุฏุฑุจุงุฑู ูุง)

     - `/contact` (ุชูุงุณ ุจุง ูุง)

     - `/heritage` (ุชุงูุงุฑ ูุฑุงุซ)

     - `/terms` (ููุงูู ู ููุฑุฑุงุช)

     - `/shop` (ูุฑูุดฺฏุงู)

     - `/checkout` (ูพุฑุฏุงุฎุช)

     - `/profile` (ูพุฑููุงู ฺฉุงุฑุจุฑ)

  2. **SmartLink Upgrade:** ุจูโุฑูุฒุฑุณุงู `SmartLink.tsx` ุจุฑุง ุงุณุชูุงุฏู ุงุฒ ูุณุฑูุง ูุงูุน Next.js ุจู ุฌุง State-based navigation.

  3. **Hybrid Stability:** ุงุณุชูุงุฏู ุงุฒ `ClientWrapper` ู `dynamic imports` ุฏุฑ ุตูุญุงุช ุฌุฏุฏ ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุฎุทุงูุง Hydration ุฏุฑ ุงู ูุงุฒ ฺฏุฐุงุฑ.

- **ูุชุฌู:** ููฺฉโูุง ูุฏุฑ ุงฺฉููู ุจู ุฏุฑุณุช ฺฉุงุฑ ูโฺฉููุฏ ู URLูุง ูุงูุน ุจุฑุง ุจุฑุฑุณ ุชูุณุท ุจุงุฒุฑุณ ุฏุฑฺฏุงู ูพุฑุฏุงุฎุช (Shaparak/BitPay) ูุฌูุฏ ุฏุงุฑุฏ.

#### 30. Campaign System Implementation & Bug Fixes (2025-01-04) โ
- **ุชุงุฑุฎ:** ฑด ุฏ ฑดฐณ
- **ุงููุงู:** ุงูฺฏูุจุฑุฏุงุฑ ุงุฒ ูุฏู Crowdfunding ุณุงุช `derakhtkari.com`.
- **ูุฏู:** ุงูุฒุงุด ูุดุงุฑฺฉุช ูุฑุฏู ุงุฒ ุทุฑู ฺฉููพูโูุง ูุฏูููุฏ.
- **ุงูุฏุงูุงุช:**
  1. **Data Model:** ุงูุฒูุฏู ูุฏู `Campaign` ู ุฏุงุฏูโูุง ุงููู `INITIAL_CAMPAIGNS` (ูุฎูุณุชุงู ุงูุฏุ ุฎูุซโุณุงุฒ ฺฉุฑุจูุ ุงุฏุจูุฏ).
  2. **UI Components:** ุณุงุฎุช `CampaignCard.tsx` (ุจุง Progress Bar) ู `CampaignList.tsx`.
  3. **Integration:** ุงุถุงูู ฺฉุฑุฏู ุจุฎุด ฺฉููพูโูุง ุจู `HomeView`.
  4. **Visuals:** ุจูโุฑูุฒุฑุณุงู ุชูุงู ุชุตุงูุฑ ูุญุตููุงุช ูุฑูุดฺฏุงู ุจุง ููฺฉโูุง ุฌุฏุฏ Cloudinary (ุชููุฏ ุดุฏู ุชูุณุท AI).
  5. **Bug Fix:** ุฑูุน ุฎุทุง Runtime Error ุฏุฑ `SpringOfMeaning` (ูุฏุฑุช `undefined` ุจูุฏู `allUsers`).
#### 32. High-Impact Infographics (2025-01-04) โ
- **ุชุงุฑุฎ:** ฑด ุฏ ฑดฐณ
- **ูุฏู:** ุงูุฒุงุด ุดูุงูุช ู ุฌุฐุงุจุช ุจุตุฑ ุจุง ุงุณุชูุงุฏู ุงุฒ ุงูููฺฏุฑุงูฺฉโูุง ณ ุจุนุฏ.
- **ุงูุฏุงูุงุช:**
  1. **New Component:** ุณุงุฎุช `InfographicOverlay.tsx` ุจุฑุง ูุฑุงุฑ ุฏุงุฏู ูุชูโูุง ูุงุฑุณ ุฑู ุชุตุงูุฑ (Hotspots).
  2. **HomeView:** ุฌุงฺฏุฒู ุจุฎุด "ฺฺฏููู ฺฉุงุฑ ูโฺฉูุฏ" ุจุง ุงูููฺฏุฑุงูฺฉ ุงุฒููุชุฑฺฉ.
  3. **CollectiveImpact:** ุฌุงฺฏุฒู ูููุฏุงุฑ ุณุงุฏู ุจุง ุงูููฺฏุฑุงูฺฉ ุดุนุงุน (Radial) ุฏุฑ ุจุฎุด ุชุงุซุฑ ุฌูุน.
  4. **ShopView:** ุงุถุงูู ฺฉุฑุฏู ุจูุฑ ุขููุฒุด "ุขูุงุชูู ูุฎู ูุนูุง" ุฏุฑ ุจุงูุง ูุฑูุดฺฏุงู.
- **ูุชุฌู:** ุชุฌุฑุจู ุจุตุฑ ุณุงุช ุจู ุดุฏุช ุงุฑุชูุง ุงูุช ู ููุงูู ุงูุชุฒุงุน (ูุซู ุชุงุซุฑ ูุฎู) ููููุณโุชุฑ ุดุฏูุฏ.

#### 31. Dual-View Product Cards (2D + Real) (2025-01-04) โ
- **ุชุงุฑุฎ:** ฑด ุฏ ฑดฐณ
- **ูุดฺฉู:** ุดูุงุณุง ุฎุทุง ุณูุชฺฉุณ ุฎุทุฑูุงฺฉ ุฏุฑ ูุงู `.env.local` (ุงุฏุบุงู ูุชุบุฑ Cloudinary ุจุง ูุชู ุงุถุงู).
- **ุงูุฏุงู:** ุงุตูุงุญ ูุงู ู ุงุฌุฑุง ุชุณุช `npm run verify:env`.
- **ูุชุฌู:** ุชูุงู ฑฑ ูุชุบุฑ ุญุงุช ุณุณุชู (ุดุงูู AIุ ูพุฑุฏุงุฎุช ู ุฏุชุงุจุณ) ุงฺฉููู ุณุจุฒ ู ุชุงุฏ ุดุฏู ูุณุชูุฏ.


#### 25. Navigation & UX Bug Fixes (2025-12-31) โ

- **ุชุงุฑุฎ:** ฑฑ ุฏ ฑดฐณ

- **ูุดฺฉูุงุช ุฑูุน ุดุฏู:**

  1. **Navigation Double-Click Bug:** ุงุตูุงุญ `useRouteSync.ts` - ุชุบุฑ `pushState` ุจู `replaceState` ู ุงุถุงูู ฺฉุฑุฏู `lastSyncedView` ref ุจุฑุง ุฌููฺฏุฑ ุงุฒ loop.

  2. **Cart Address Redirection:** ุญุฐู duplicate reducer case ุจุฑุง `SET_PROFILE_TAB_AND_NAVIGATE` ู ุฑูุน race condition ุฏุฑ `ShoppingCart.tsx`.

  3. **Timeline Deed Display:** ุงุตูุงุญ ููุงุด ุฏฺฉููโูุง "ูุดุงูุฏู ุณูุฏ" ู "ุงูุฒูุฏู ุฎุงุทุฑู" ุฏุฑ `TimelineTab.tsx` ุจุง null-safe deed lookup.

- **ุจูุจูุฏูุง UX:**

  - โ **Address ุฏุฑ ุงุทูุงุนุงุช ูพุงู:** ููุฏูุง ุขุฏุฑุณ (ุขุฏุฑุณุ ูพูุงฺฉุ ุทุจูู) ุจู ุชุจ "ุงุทูุงุนุงุช ูพุงู" ูพุฑููุงู ุงุถุงูู ุดุฏ.

  - โ **Checkout Validation:** ุงุนุชุจุงุฑุณูุฌ ุขุฏุฑุณ ฺฉุงูู (ุญุฏุงูู ฑฐ ฺฉุงุฑุงฺฉุชุฑ) + ูพูุงฺฉ ุงุฌุจุงุฑ ูุจู ุงุฒ ุฎุฑุฏ.

  - โ **Palm Planting Notice:** ูพุงู ุงุทูุงุนโุฑุณุงู "ฺฉุงุดุช ุธุฑู ท ุฑูุฒ ฺฉุงุฑ + ุงุฑุณุงู ุนฺฉุณ" ุจุนุฏ ุงุฒ ุฎุฑุฏ ูุฎู.

- **ุชุบุฑุงุช ุฏฺฏุฑ:**

  - โ **ุบุฑูุนุงูโุณุงุฒ ูููุช:** ุฏฺฉููโูุง "ุตุฏุง ูุฎู" ู "ุขูุฏู ูุฎู" ุฏุฑ `DeedDisplay.tsx` ฺฉุงููุช ุดุฏูุฏ.

  - โ **SEO:** ฺฉููุงุช ฺฉูุฏ "ูุฎู ูุนูุง" ู "ูุนูุง" ุจู ูุชุงุฏุชุง ุณุงุช ุงุถุงูู ุดุฏ.

- **ูุชุฌู:** ุชุฌุฑุจู ฺฉุงุฑุจุฑ navigation ู checkout ุจู ุทูุฑ ูุงุจู ุชูุฌู ุจูุจูุฏ ุงูุช.

#### 21. Product Persistence & Professional Visuals โ
- **ุชุงุฑุฎ:** 2025-12-27 (ท ุฏ ฑดฐณ)
- **ูุดฺฉู:** ุนุฏู ูพุงุฏุงุฑ ุชุตุงูุฑ ู ุฏุงุฏูโูุง ูุญุตูู ูพุณ ุงุฒ ูุฑุงุด ุฏุฑ ุฏุงุดุจูุฑุฏ ุงุฏูู (ุจุฑฺฏุดุช ุจู ุญุงูุช ูุจู ุจุง ุฑูุฑุด).
- **ุฑุดู ุงุจ:**
  1. **Security/RLS:** ููุด `anon` ุงุฌุงุฒู ููุดุชู ุฏุฑ Supabase ุฑุง ูุฏุงุดุช.
  2. **Mismatch:** ุณุชูู `id` ุงุฒ ููุน UUID ุจูุฏ ุงูุง ูุฑุงูุชโุชูุฏ ุงุฒ TEXT ุงุณุชูุงุฏู ูโฺฉุฑุฏ.
  3. **No Await:** ูุฑุงุฎูุงู `dbAdapter` ุฏุฑ ุฑุฏูุณุฑ ุจุฏูู `await` ุจูุฏ.
- **ุฑุงู ุญู ููุง (Stable Fix):**
  - โ **API Route:** ุงุฌุงุฏ `/api/update-product.js` ุจุง ุงุณุชูุงุฏู ุงุฒ `Service Role Key` ุจุฑุง ุงูุฌุงู ุนููุงุช ุงุฏูู ุฏุฑ ุณูุช ุณุฑูุฑ (ุฏูุฑ ุฒุฏู RLS).
  - โ **Unified Adapter:** ุจุงุฒููุณ `database.ts` ุจุฑุง ุงุณุชูุงุฏู ุงุฒ API Route ุจู ุฌุง Supabase Client ูุณุชูู ุฏุฑ ูุฑูุฑฺฏุฑ.
- **ุจูุจูุฏ ุจุตุฑ:**
  - โ ุชููุฏ ุชุตุงูุฑ ุญุฑููโุง AI ุจุฑุง ุชูุงู ูุญุตููุงุช (ูุฎู ูุนูุงุ ุงุฏุจูุฏุ ุงุฑุงูุ ุตูุงุน ุฏุณุช ู ุบุฑู).
- **ูุชุฌู:** ุณุณุชู ูุฏุฑุช ูุญุตูู ุงฺฉููู ฺฉุงููุงู ูพุงุฏุงุฑ ู ุงูู ุงุณุช.

#### 9. Database Verification โ

- **ุชุงุฑุฎ:** 2025-12-11 12:49
- **ุฌุฒุฆุงุช:**
  - โ ุชุฃุฏ ูุฌูุฏ 16 ุฌุฏูู ุฏุฑ Supabase (13 ุฌุฏูู ุงุตู + 3 ุฌุฏูู ุงุถุงู)
  - โ ุฌุฏุงูู ุงุถุงู: `agent_tasks`, `deeds`, `posts`
  - โ Schema ูุจูุงู ุจุง ููููุช ุงุฌุฑุง ุดุฏู ุจูุฏ
- **ูุณุชูุฏุงุช:**
  - โ ฺฏุฒุงุฑุด ฺฉุงูู ุฏุฑ: `docs/reports/DATABASE_VERIFICATION_REPORT.md`

#### 9. Security Refactor & Auth Fix โ
- **ุชุงุฑุฎ:** 2025-12-15
- **ุฌุฒุฆุงุช:**
  - โ ุญุฐู ฺฉูุฏูุง Hardcode ุดุฏู API
  - โ ฺฉูพุงุฑฺูโุณุงุฒ Auth Listener ุฏุฑ `AppContext`
  - โ ุญู ูุดฺฉู Race Condition ุฏุฑ ูุงฺฏู

#### 10. Purchase Logic Verification โ
- **ุชุงุฑุฎ:** 2025-12-15
- **ุฌุฒุฆุงุช:**
  - โ ุชุฃุฏ ุตุญุช ููู `Checkout` -> `PaymentCallback` -> `DB Update`

#### 11. Vercel Build Fix (Vite Config) โ
- **ุชุงุฑุฎ:** 2025-12-15
- **ุงูุฏุงู:** Explicit Configuration
- **ุฌุฒุฆุงุช:**
  - โ ุชูุธู ุตุฑุญ `root` ุฏุฑ `vite.config.ts`
  - โ ุชูุธู ุตุฑุญ `build.rollupOptions.input` ุจู `index.html`
  - โ ูุฏู: ุฑูุน ุฎุทุง `Could not resolve entry module "index.html"` ุฏุฑ ูุญุท Vercel


#### 12. Production Launch (V5.1) ๐
- **ุชุงุฑุฎ:** 2025-12-15
- **ูุถุนุช:** LIVE
- **ุขุฏุฑุณ:** [manapalm.com](http://manapalm.com/)
- **ูุณุฎู:** V5.1 (Unified Meaning OS)
- **ุดุฑุญ:**
  - โ ุฏูพูู ูููู ุฑู Vercel
  - โ ุงุชุตุงู ุฏุงููู
  - โ ุฑูุน ูุดฺฉูุงุช Build ู Git
  - โ ุณุณุชู ุขูุงุฏู ุฎุฏูุชโุฑุณุงู

#### 13. Deep AI Debugging & Local Server Setup โ
- **ุชุงุฑุฎ:** 2025-12-16
- **ุฌุฒุฆุงุช:**
  - โ ุงุฌุงุฏ `local-server.js` ุจุฑุง ุดุจูโุณุงุฒ Environment Vercel ุฏุฑ ููฺฉุงู
  - โ ุฑูุน ูุดฺฉู 404 ูุฏูโูุง Gemini (ุงุณุชูุงุฏู ุงุฒ `gemini-2.5-flash-lite`)
  - โ ุดูุงุณุง ู ุฌุงฺฏุฒู ฺฉูุฏ API ูู ุฑูุชู (Leaked Key)
  - โ ุชุงุฏ ููุง ุงุชุตุงู ุจุง ุงุณฺฉุฑูพุช `verify-ai.js`

#### 15. Next.js 14 Migration (Phase 1: Bridge) โ
- **ุชุงุฑุฎ:** 2025-12-20
- **ุฌุฒุฆุงุช:**
  - โ ูุตุจ Next.js 14 ู `@supabase/ssr`
  - โ ุงุฌุงุฏ `app/layout.tsx` (Server Component) ุจุง ุชูุงู ุงุณุชุงูโูุง ู ุงุณฺฉุฑูพุชโูุง `index.html`
  - โ ุงุฌุงุฏ `app/providers.tsx` ุจุฑุง ูุฏุฑุช ฺฉูุงูุชโุณุงุฏ (AppContext, Helmet)
  - โ ูพุงุฏูโุณุงุฒ `middleware.ts` ุจุฑุง ูุฏุฑุช Session ุฏุฑ ุณูุช ุณุฑูุฑ
  - โ ุงุตูุงุญ `supabaseClient.ts` ุจุฑุง ูพุดุชุจุงู ููุฒูุงู ุงุฒ Vite ู Next.js
  - โ ุซุจุช ุงุณฺฉุฑูพุชโูุง `next:*` ุฏุฑ `package.json`

#### 23. SMS API Direct Verification โ
- **ุชุงุฑุฎ:** 2025-12-29
- **ุฌุฒุฆุงุช:**
  - โ ุงุฌุงุฏ ุงุณฺฉุฑูพุช ุชุณุช ูุณุชูู `test-sms-direct.js`.
  - โ ุชุณุช ูููู ุงุชุตุงู ุจู `api.sms.ir` ุจุง ฺฉูุฏูุง Environment ูุงูุน.
  - โ ูุชุฌู: `Status 200 OK` - ุงุฑุณุงู ูพุงูฺฉ ุชุณุช ููููุชโุขูุฒ ุจูุฏ.
- **ุชุญูู:** ฺฉูุฏ API ู Template ID ุตุญุญ ูุณุชูุฏ. ูุดฺฉู ุงุญุชูุงู ุฏุฑ Production ูุฑุจูุท ุจู IP Whitelist ุง ุชูุธูุงุช Runtime ุงุณุช.
#### 18. AI Image Agent Implementation (V2 - Refined) โ
- **ุชุงุฑุฎ:** 2025-12-21
- **ุฌุฒุฆุงุช:**
  - โ ูพุงุฏูโุณุงุฒ `aiImageAgent.ts` ุจุง ูพุดุชุจุงู ุฏูฺฏุงูู (DALL-E + Pollinations).
  - โ ููุดููุฏุณุงุฒ ุชุฑุฌูู ูพุฑุงููพุช: ุชูฺฉฺฉ ููุทู ุจุฑุง ูุญุตููุงุช ฺฉุดุงูุฑุฒ ("ุฎุฑูุง" = "Date Fruit") ู ุบุฑู ("ฺฉูุฏฺฉ" = "Child").
  - โ ุฑูุน ุงุจูุงู ฺฉููุงุช ูุงุฑุณ ุฏุฑ ุชููุฏ ุชุตูุฑ.
  - โ ุงุฌุงุฏ `AIImageUploader` ู `AiArtStudioDashboard` ุจุง UX ุจูุจูุฏ ุงูุชู ู ุฑุงูููุง.
- **ูุชุฌู:** ูุฏุฑ ุณุณุชู ุงฺฉููู ูโุชูุงูุฏ ุชุตุงูุฑ ุฏูู ู ูุฑุชุจุท (ฺู ูุญุตูู ู ฺู ุนููู) ุชููุฏ ฺฉูุฏ ู ูุณุชููุงู ุขูพููุฏ ููุงุฏ.

#### 24. Test User for Payment Gateway Review โ
- **ุชุงุฑุฎ:** 2025-12-30
- **ุฌุฒุฆุงุช:**
  - โ ุงุฌุงุฏ ุงุณฺฉุฑูพุช `scripts/create_test_user.js` ุจุฑุง ุณุงุฎุช ฺฉุงุฑุจุฑ ุชุณุช ุจุงูฺฉ.
  - โ ุงุฌุงุฏ ฺฉุงุฑุจุฑ ุจุง ููุจุงู `09001112233` ู ุฑูุฒ ุนุจูุฑ ุซุงุจุช ุฏุฑ ุฏุชุงุจุณ Supabase.
  - โ ูุฏู: ุงุฑุงุฆู ุฏุณุชุฑุณ ุชุณุช ุจู ุจุงุฒุฑุณ ุดุงูพุฑฺฉ/ูพุฑุฏุงุฎุชโุงุฑ ุจุฏูู ูุงุฒ ุจู ุฏุฑุงูุช SMS.
- **ูุถุนุช:** ุขูุงุฏู ุจุฑุง ุงุฑุงุฆู ุจู ฺฉุงุฑุดูุงุณ ุฏุฑฺฏุงู ูพุฑุฏุงุฎุช.

#### 19. Security Hardening & UX Overhaul โ
- **ุชุงุฑุฎ:** 2025-12-21
- **ุฌุฒุฆุงุช:**
  - โ **ุงููุช:** ูุฎูโุณุงุฒ ฺฉุงูู ููู "ูุฏุฑุช" ุฏุฑ ูุฏุฑ ุจุฑุง ฺฉุงุฑุจุฑุงู ุบุฑ ุงุฏูู.
  - โ **ุงููุช:** ุงูุฒูุฏู Route Guard ุฏุฑ `MainContent.tsx` ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุฏุณุชุฑุณ ูุณุชูู ุจู `/admin`.
  - โ **ูุฑูุดฺฏุงู:** ุงุฑุชูุง `ModernShopManagement` ุจุง ูุงุจูุช **ูุฑุงุด ู ุงูุฒูุฏู ูุญุตูู** ูุงูุน (ุดุงูู ููุฏ Image URL).
  - โ **ุชุฌุฑุจู ฺฉุงุฑุจุฑ:** ุจุงุฒุทุฑุงุญ ฺฉุงูู `WelcomeTour` ุจุง ุงุณุชุงู Glassmorphism ู ุฑูุชุงุฑ Bottom Sheet ุฏุฑ ููุจุงู.
- **ูุชุฌู:** ุณุณุชู ุงฺฉููู ุงููุ ุฒุจุง ู ฺฉุงุฑุจุฑุฏโุชุฑ ุงุณุช ู ฺุฑุฎู ุชููุฏ ุชุง ุงุณุชูุงุฏู ุงุฒ ุชุตูุฑ ฺฉุงูู ุดุฏ.
#### 17. OpenRouter Integration & Zero-Cost Strategy โ
- **ุชุงุฑุฎ:** 2025-12-21
- **ุฌุฒุฆุงุช:**
  - โ ุงุถุงูู ฺฉุฑุฏู `OPENROUTER_API_KEY` ุจู ูุฏุฑุช Environment
  - โ ุงุฑุชูุง `api/proxy.js` ุจุฑุง ูพุดุชุจุงู ุงุฒ Providerูุง ูุชุนุฏุฏ (Hybrid Gateway)
  - โ ูพุงุฏูโุณุงุฒ ูฺฉุงูุฒู ุณูุฆฺ ุฎูุฏฺฉุงุฑ ุจุฑ ุงุณุงุณ ูุงู ูุฏู ุง ููฺฏ `provider`
  - โ ุฌุงฺฏุฒู ุชูุงู ูุฏูโูุง ูพูู ุจุง ูุฏู ุฑุงฺฏุงู OpenRouter (`google/gemini-2.0-flash-exp:free`)
  - โ ุจูููโุณุงุฒ `DEFAULT_FREE_MODEL` ุฏุฑ ูุณุชู ุณุณุชู ุจุฑุง ฺฉุงูุด ูุฒููโูุง ุจู ุตูุฑ
- **ูุชุฌู:** ูุงุจุณุชฺฏ ูุงู ุณุณุชู ุจู ูุฏูโูุง ูพูู ฺฏูฺฏู ุญุฐู ุดุฏ ู ูพุงุฏุงุฑ ุจุง ูุฌูุฏ ุฏู Provider ุงูุฒุงุด ุงูุช.

#### 16. Next.js Migration (Phase 2: View Routing & Modern Shell) โ
- **ุชุงุฑุฎ:** 2025-12-20
- **ุฌุฒุฆุงุช:**
  - โ ุงุฌุงุฏ ูุณุฑูุง ูุงูุน ุจุฑุง ุตูุญุงุช: `/about`, `/contact`, `/shop`, `/courses`, `/profile`, `/articles`, `/heritage`.
  - โ ููุดููุฏุณุงุฒ `Header` ู `LiveActivityBanner` ุฏุฑ Next.js Layout.
  - โ ุฑูุน ุชุฏุงุฎูโูุง ุจุตุฑ (Z-index ู Sticky overlaps).
  - โ ูพุงฺฉโุณุงุฒ `MainContent.tsx` ุงุฒ ูููุง ููุชูู ุดุฏู (ฺฉุงูุด ุญุฌู Bundle).
  - โ ุฑูุน ุฎุทุงูุง ุชุงูพ (productId) ู ูุงุจุฑโูุง ููููุฏ (AICreationStudio) ุฏุฑ ูุณุฑ ููุงุฌุฑุช.
- **ูุชุฌู:** ุณุงุช ุงฺฉููู ฺฉ ุจุฑูุงูู ฺูุฏุตูุญูโุง ูุฏุฑู (MPA) ุจุง ุญูุธ ูฺฺฏโูุง ุงูุชุฑุงฺฉุชู SPA ุงุณุช. ุณุฆู ุจุฑุง ุชูุงู ุตูุญุงุช ุงุตู ูุนุงู ุดุฏ.

#### 20. AI Chat Widget Comprehensive Fix & Enhancement โ
- **ุชุงุฑุฎ:** 2025-12-22
- **ูุดฺฉู:** ุฎุทุง "Connection Failed" ุฏุฑ ููฺฉุงู (Port 3002) ู ุนุฏู ุฑุนุงุช System Prompt ุชูุณุท OpenRouter.
- **ุฑุดู ุงุจ:**
  1. **CORS:** ูุงู `api/proxy.js` ููุท ูพูุฑุช 3000 ุฑุง ูุฌุงุฒ ูโุฏุงูุณุช.
  2. **Vite Proxy:** ูุช ุจู ูพูุฑุช 3001 ูพุฑูฺฉุณ ูโฺฉุฑุฏ ฺฉู ุฎุงู ุจูุฏ (ฺูู API Server ุฑุงู ูุจูุฏ).
  3. **System Prompt:** ูุงุฌฺฉ OpenRouter ูพุฑุงููพุช ุณุณุชู ุฑุง ูุงุฏุฏู ูโฺฏุฑูุช.
- **ุฑุงู ุญู:**
  - โ **Local API Server:** ุงุฌุงุฏ `local-api-server.js` ุจุฑุง ุดุจูโุณุงุฒ ฺฉุงูู Vercel Function ุฏุฑ ูพูุฑุช 3001.
  - โ **Script Update:** ุงุถุงูู ฺฉุฑุฏู ุฏุณุชูุฑ `npm run dev:full` ุจุฑุง ุงุฌุฑุง ููุฒูุงู ฺฉูุงูุช (3002) ู ุณุฑูุฑ (3001).
  - โ **Proxy Logic:** ุงุตูุงุญ `api/proxy.js` ุจุฑุง ุงุฑุณุงู ุตุญุญ `systemInstruction` ุจู OpenRouter.
  - โ **AI Features:** ุงุนูุงู ููุงูู "ุฎูุงุตู ููุณ"ุ "ููฺฉโุฏู" ู "3 ฺฏุฒูู ูพุดููุงุฏ" ุฏุฑ `AIChatWidget`.
- **ูุชุฌู:** ููุด ูุตููุน ุงฺฉููู ุฏุฑ ูุญุท ููฺฉุงู ฺฉุงููุงู ูุนุงู ุงุณุชุ ูพุงุณุฎโูุง ฺฉูุชุงู ู ููฺฉโุฏุงุฑ ูโุฏูุฏ ู ณ ฺฏุฒูู ุฏูู ูพุดููุงุฏ ูโฺฉูุฏ.

#### 22. Infrastructure Setup: CLI & Types โ
- **ุชุงุฑุฎ:** 2025-12-29
- **ุฌุฒุฆุงุช:**
  - โ ูุตุจ ู ูุงฺฏู ุจู `Supabase CLI`.
  - โ ุชููุฏ ุฎูุฏฺฉุงุฑ ูุงู `types/supabase.ts` ุจุฑุง ููุงููฺฏ ฺฉุงูู ูุฑุงูุช ู ุจฺฉูุฏ.
  - โ ูุตุจ ู ูุงฺฏู ุจู `Vercel CLI`.
  - โ ุฏุงูููุฏ ุขุฎุฑู ูุชุบุฑูุง ูุญุท (`vercel env pull`) ุจุฑุง ุฏุจุงฺฏ ุฏูู.
  - โ ุงุตูุงุญ ุงูฺฉูุฏูฺฏ ูุงู ุชุงูพโูุง ุจุฑุง ุณุงุฒฺฏุงุฑ ุจุง ููุฏูุฒ.
- **ูุชุฌู:** ุฒุฑุณุงุฎุช ุชูุณุนู ุจุฑุง ุฏุจุงฺฏ ุฏูู ู ุณุฑุน ุขูุงุฏู ุดุฏ.


---

## ๐ ุงูุฏุงูุงุช ุฏุฑ ุญุงู ุงูุฌุงู (In Progress)

### Task 2.1: ุชูุธู Environment Variables ๐
- **ูุถุนุช:** ุขูุงุฏู ุจุฑุง ุงุฌุฑุง - ุงุจุฒุงุฑูุง ฺฉุงูู ุดุฏู
- **ุฑุงูููุง:** `docs/guides/VERCEL_ENV_SETUP.md` (ุจูโุฑูุฒ ุดุฏู 2025-01-04)
- **ุงุณฺฉุฑูพุชโูุง:** `npm run verify:schema`, `npm run verify:env`, `npm run verify:setup`
- **ุงูุฏุงู ููุฑุฏ ูุงุฒ:** ุชูุธู ฺฉูุฏูุง ุฏุฑ Vercel Dashboard ู ุงุฌุฑุง Redeploy

---


## ๐ ุงูุฏุงูุงุช ุจุงูโูุงูุฏู (Backlog)

### ๐จ **ุงูููุช 1: ุฑูุน ุจุงฺฏ Schema ู ุฑุงูโุงูุฏุงุฒ Database**

#### Task 1.1: ูพุงฺฉโุณุงุฒ Schema โ
- **ุงุฑุฒุด ฺฉุณุจโูฺฉุงุฑ:** ุจุฏูู Schema ุตุญุญุ ุฏุชุงุจุณ ุงุฌุฑุง ููโุดูุฏ
- **ุชุฎูู ุฒูุงู:** 5 ุฏููู
- **ุงูุฏุงูุงุช:**
  1. ุญุฐู ุฎุทูุท 159-164 ุงุฒ `supabase_schema.sql`
  2. ุจุฑุฑุณ ุนุฏู ูุฌูุฏ ุชฺฉุฑุงุฑ ุฏุฑ ุฌุฏุงูู
  3. Validation ููุง

#### Task 1.2: ุงุฌุฑุง Schema ุฏุฑ Supabase โ
- **ุงุฑุฒุด ฺฉุณุจโูฺฉุงุฑ:** ูุนุงูโุณุงุฒ ุฏุชุงุจุณ ูุงูุน
- **ุชุฎูู ุฒูุงู:** 10 ุฏููู
- **ุงูุฏุงูุงุช:**
  1. ูุงฺฏู ุจู Supabase Dashboard
  2. ุฑูุชู ุจู SQL Editor
  3. ุงุฌุฑุง `supabase_schema.sql`
  4. ุจุฑุฑุณ ุนุฏู ูุฌูุฏ Error
  5. ุชุณุช ุงุชุตุงู ุงุฒ `dbAdapter.ts`

#### Task 1.3: Seed Data (ุงุฎุชุงุฑ) โ
- **ุงุฑุฒุด ฺฉุณุจโูฺฉุงุฑ:** ุฏุงุฏูโูุง ููููู ุจุฑุง ุชุณุช
- **ุชุฎูู ุฒูุงู:** 15 ุฏููู
- **ุงูุฏุงูุงุช:**
  1. ุงุฌุงุฏ ุงุณฺฉุฑูพุช Seed
  2. ุงุถุงูู ฺฉุฑุฏู ูุญุตููุงุช ููููู
  3. ุงุถุงูู ฺฉุฑุฏู ุฏูุฑูโูุง ููููู

---

### โ๏ธ **ุงูููุช 2: ุชูุธู Environment Variables**

#### Task 2.1: ุชูุธู ูุชุบุฑูุง Vercel โ
- **ุงุฑุฒุด ฺฉุณุจโูฺฉุงุฑ:** ุจุฏูู ุงู ฺฉูุฏูุงุ AI ู Payment ฺฉุงุฑ ููโฺฉููุฏ
- **ุชุฎูู ุฒูุงู:** 10 ุฏููู
- **ูุชุบุฑูุง ููุฑุฏ ูุงุฒ:**
  ```
  GEMINI_API_KEY=<your_gemini_key>
  ZARINPAL_MERCHANT_ID=<your_merchant_id>
  ZARINPAL_SANDBOX=true
  VITE_SUPABASE_URL=https://sbjrayzghjfsmmuygwbw.supabase.co
  VITE_SUPABASE_ANON_KEY=<your_anon_key>
  ```
- **ุงูุฏุงูุงุช:**
  1. ูุงฺฏู ุจู Vercel Dashboard
  2. ุฑูุชู ุจู Settings โ Environment Variables
  3. ุงุถุงูู ฺฉุฑุฏู ุชูุงู ูุชุบุฑูุง
  4. Redeploy ูพุฑูฺู

#### Task 2.2: ุชุณุช ุงุชุตุงู Proxy โ
- **ุชุฎูู ุฒูุงู:** 5 ุฏููู
- **ุงูุฏุงูุงุช:**
  1. ุงุฑุณุงู ฺฉ ุฏุฑุฎูุงุณุช ุชุณุช ุจู `/api/proxy`
  2. ุจุฑุฑุณ ุฏุฑุงูุช ูพุงุณุฎ ุงุฒ Gemini
  3. ุจุฑุฑุณ Console ุจุฑุง Errors

#### Task 2.3: ุชูุธู AI Image Agent Keys โ
- **ุงุฑุฒุด ฺฉุณุจโูฺฉุงุฑ:** ูุนุงูโุณุงุฒ ูุงุจูุช ุชููุฏ ุชุตูุฑ ููุดููุฏ
- **ุชุฎูู ุฒูุงู:** 10 ุฏููู
- **ูุชุบุฑูุง ููุฑุฏ ูุงุฒ:**
  ```env
  NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME=<your_cloud_name>
  CLOUDINARY_API_KEY=<your_api_key>
  CLOUDINARY_API_SECRET=<your_api_secret>
  OPENAI_API_KEY=<your_openai_key>
  ```
- **ุงูุฏุงูุงุช:**
  1. ุณุงุฎุช ุงฺฉุงูุช Cloudinary (Free Tier)
  2. ุฏุฑุงูุช ฺฉูุฏูุง ุงุฒ Dashboard
  3. ุงุถุงูู ฺฉุฑุฏู ุจู Vercel Environment Variables

---

### ๐งช **ุงูููุช 3: ุชุณุช End-to-End**

#### Task 3.1: ุชุณุช ููู ุฎุฑุฏ โ
- **ุงุฑุฒุด ฺฉุณุจโูฺฉุงุฑ:** ุงุทููุงู ุงุฒ ุนููฺฉุฑุฏ ุตุญุญ ูุจู ุงุฒ ูุงูฺ
- **ุชุฎูู ุฒูุงู:** 20 ุฏููู
- **ุณูุงุฑู:**
  1. ูุฑูุฏ ฺฉุงุฑุจุฑ (ูุงฺฏู/ุซุจุชโูุงู)
  2. ูุฑูุฑ ูุฑูุดฺฏุงู
  3. ุงุถุงูู ฺฉุฑุฏู ูุญุตูู ุจู ุณุจุฏ
  4. ุฑูุชู ุจู Checkout
  5. ูพุฑุฏุงุฎุช (Sandbox)
  6. ุจุฑุฑุณ ุซุจุช ุณูุงุฑุด ุฏุฑ ุฏุชุงุจุณ
  7. ุจุฑุฑุณ ุซุจุช Impact Log

#### Task 3.2: ุชุณุช LMS (ุขฺฉุงุฏู) โ
- **ุชุฎูู ุฒูุงู:** 15 ุฏููู
- **ุณูุงุฑู:**
  1. ูุฑูุฑ ุฏูุฑูโูุง
  2. ุซุจุชโูุงู ุฏุฑ ุฏูุฑู
  3. ูุดุงูุฏู ุฏุฑุณ
  4. ุชฺฉูู ุฏุฑุณ
  5. ุจุฑุฑุณ ุซุจุช ูพุดุฑูุช ุฏุฑ ุฏุชุงุจุณ

#### Task 3.3: ุชุณุช AI Features โ
- **ุชุฎูู ุฒูุงู:** 15 ุฏููู
- **ุณูุงุฑู:**
  1. ุจุงุฒ ฺฉุฑุฏู ฺุช AI
  2. ุงุฑุณุงู ูพุงู
  3. ุฏุฑุงูุช ูพุงุณุฎ
  4. ุชุณุช ุชููุฏ ุชุตูุฑ (Imagen)
  5. ุชุณุช ุชููุฏ ูุฏู (Veo)

---

### โก **ุงูููุช 4: ุจูููโุณุงุฒ Performance**

#### Task 4.1: ุจูููโุณุงุฒ ุชุตุงูุฑ โ
- **ุงุฑุฒุด ฺฉุณุจโูฺฉุงุฑ:** ุณุฑุนุช ุจุงูุงุชุฑ โ ุชุฌุฑุจู ุจูุชุฑ โ Retention ุจุดุชุฑ
- **ุชุฎูู ุฒูุงู:** 30 ุฏููู
- **ุงูุฏุงูุงุช:**
  1. ุชุจุฏู ุชุตุงูุฑ PNG/JPG ุจู WebP
  2. ุงุถุงูู ฺฉุฑุฏู Lazy Loading ุจุฑุง Images
  3. ุงุณุชูุงุฏู ุงุฒ `srcset` ุจุฑุง Responsive Images

#### Task 4.2: Code Splitting ูพุดุฑูุชู โ
- **ุชุฎูู ุฒูุงู:** 20 ุฏููู
- **ุงูุฏุงูุงุช:**
  1. ุชุญูู Bundle Size
  2. Split ฺฉุฑุฏู ฺฉุงููพูููุชโูุง ุณูฺฏู
  3. Dynamic Import ุจุฑุง Routes

---

### ๐ **ุงูููุช 5: ุขูุงุฏูโุณุงุฒ Production**

#### Task 5.1: SEO Optimization โ
- **ุชุฎูู ุฒูุงู:** 30 ุฏููู
- **ุงูุฏุงูุงุช:**
  1. ุจุฑุฑุณ `sitemap.xml`
  2. ุจุฑุฑุณ `robots.txt`
  3. ุงุถุงูู ฺฉุฑุฏู Meta Tags
  4. ุงุถุงูู ฺฉุฑุฏู Schema.org Markup

#### Task 5.2: Security Audit โ
- **ุชุฎูู ุฒูุงู:** 45 ุฏููู
- **ุงูุฏุงูุงุช:**
  1. ุจุฑุฑุณ RLS Policies
  2. ุจุฑุฑุณ CORS Settings
  3. ุจุฑุฑุณ API Rate Limiting
  4. ุจุฑุฑุณ Input Validation

#### Task 5.3: Monitoring Setup โ
- **ุชุฎูู ุฒูุงู:** 30 ุฏููู
- **ุงูุฏุงูุงุช:**
  1. ูุตุจ Sentry
  2. ุชูุธู Error Tracking
  3. ุชูุธู Performance Monitoring

---

## ๐จ ูุดฺฉูุงุช ุดูุงุณุง ุดุฏู (Issues)

### Issue #1: Schema Duplication โ๏ธ
- **ูุงู:** `supabase_schema.sql`
- **ุฎุทูุท:** 159-164
- **ุชูุถุญ:** ุฌุฏูู `crowdfunds` ุฏูุจุงุฑ ุชุนุฑู ุดุฏู (ฺฉ ูุงูุต)
- **ุงูููุช:** ุจุงูุง
- **ูุถุนุช:** ุดูุงุณุง ุดุฏู - ูุงุฒ ุจู ุฑูุน

### Issue #2: Missing Environment Variables โ๏ธ
- **ุชูุถุญ:** ฺฉูุฏูุง API ุฏุฑ Environment Variables ุชูุธู ูุดุฏูโุงูุฏ
- **ุชุฃุซุฑ:** AI ู Payment ฺฉุงุฑ ููโฺฉููุฏ
- **ุงูููุช:** ุจุงูุง
- **ูุถุนุช:** ุดูุงุณุง ุดุฏู - ูุงุฒ ุจู ุชูุธู

---

## ๐ฏ ูุณุฑ ูพุดููุงุฏ (Next Steps)

### ูุฑุฏุง (ุงุฏุงูู ูุณุฑ)
1. **ุดฺฉุงุฑ ุจุงฺฏ SMS ุฏุฑ ูพุฑูุฏุงฺฉุดู**:
   - ุจุง ุชูุฌู ุจู ุงูฺฉู ุชุณุช ูุณุชูู `test-sms-direct.js` ูููู ุจูุฏุ ูุฑุฏุง ูุงฺฏโูุง Vercel ุฑุง ุฏุฑ ูุญุธู (Real-time) ฺฺฉ ูโฺฉูู ุชุง ุชูุงูุช ูุญุท ุณุฑูุฑ ุฑุง ูพุฏุง ฺฉูู.
2. **ุงุณุชูุงุฏู ุงุฒ ุชุงูพโูุง ูุงูุน (Type Safety)**:
   - ุฌุงฺฏุฒู ุชุงูพโูุง ุฏุณุช ุจุง `Database` ุฌูุฑุช ุดุฏู ุงุฒ `types/supabase.ts` ุจุฑุง ุญุฐู ุฎุทุงูุง "undefined" ุฏุฑ ฺฉุงููพูููุชโูุง `Product` ู `Cart`.
3. **ุชุณุช ู ุฏุจุงฺฏ ููุง**:
   - ุจุฑุฑุณ ูุถุนุช `Planting Flow` ุจุง ุฏุชุงุจุณ ูุงูุน.

### ููุชู ุขูุฏู
1. Monitoring Setup (Task 5.3)
2. ูุงูฺ Beta ุจุฑุง 10-20 ฺฉุงุฑุจุฑ
3. ุฌูุนโุขูุฑ Feedback

---

## ๐ ูุชุฑฺฉโูุง ฺฉูุฏ (KPIs)

| ูุชุฑฺฉ | ูุฏู | ูุถุนุช ูุนู |
|-------|-----|-----------|
| **Database Uptime** | 99.9% | - (ูููุฒ ุฑุงูโุงูุฏุงุฒ ูุดุฏู) |
| **API Response Time** | <500ms | - (ูุงุฒ ุจู ุชุณุช) |
| **Payment Success Rate** | >95% | - (ูุงุฒ ุจู ุชุณุช) |
| **Page Load Time** | <2s | ~1.5s (ุฎูุจ) |
| **Lighthouse Score** | >90 | - (ูุงุฒ ุจู ุชุณุช) |

---

## ๐ ููฺฉโูุง ููู

- **Supabase Dashboard:** https://app.supabase.com/project/sbjrayzghjfsmmuygwbw
- **Vercel Dashboard:** (ูุงุฒ ุจู ููฺฉ)
- **ZarinPal Dashboard:** (ูุงุฒ ุจู ููฺฉ)
- **Google AI Studio:** https://aistudio.google.com/

---

## ๐ ุงุฏุฏุงุดุชโูุง ููู

### ุชุตููุงุช ูุนูุงุฑ
1. **ฺุฑุง Supabaseุ** 
   - PostgreSQL ูุฏุฑุชููุฏ
   - RLS ุฏุงุฎู
   - Auth ู Storage ฺฉูพุงุฑฺู
   - ููุงุณโูพุฐุฑ ุขุณุงู

2. **ฺุฑุง Proxy ุจุฑุง AIุ**
   - ุงููุช API Key
   - Rate Limiting ูุชูุฑฺฉุฒ
   - Logging ู Monitoring

3. **ฺุฑุง ZarinPalุ**
   - ูพุฑุฏุงุฎุช ุฑุงู
   - ูพุดุชุจุงู ุงุฒ ฺฉุงุฑุชโูุง ุงุฑุงู
   - Sandbox ุจุฑุง ุชุณุช

### ูฺฉุงุช ูู
- ููุดู ุงุฒ `dbAdapter.isLive()` ุจุฑุง ฺฺฉ ฺฉุฑุฏู ุงุชุตุงู ุงุณุชูุงุฏู ฺฉูุฏ
- ุชูุงู ุชุบุฑุงุช Schema ุจุงุฏ ุจุง Migration ูุฏุฑุช ุดููุฏ
- API Keys ูุฑฺฏุฒ ูุจุงุฏ ุฏุฑ Frontend ูุฑุงุฑ ฺฏุฑูุฏ

---

## ๐ ุชุงุฑุฎฺู ุชุบุฑุงุช

| ุชุงุฑุฎ | ุชุบุฑ | ุชูุณุท |
|-------|-------|------|
| 2026-02-02 14:30 | **Premium UI & Core Fixes**: Integrated 3D logo loading spinner globally. Fixed SMS expiry parameters. Resolved address persistence and password onboarding bugs. Configured Dual-Identity Admin status. | Mana (Unified OS) |
| 2026-01-25 10:15 | **Agentic Architecture**: Created `.agent/personas` and registered 6 specialized agents. Established "AI Systems & QA" as the primary controller roles. | Mana (Unified OS) |
| 2026-01-21 18:50 | **SEO & Performance**: Enabled SSR, Metadata API, Schema Markup, and Next/Image. Resized infographics for desktop. | Mana (Unified OS) |
| 2026-01-20 14:40 | **Infographic & Icons**: Updated "Path of Immortality" image and restored missing social/communication icons to fix build errors. | Mana (Unified OS) |
| 2026-01-19 14:15 | **Layout Fix**: Removed redundant `ClientWrapper` from all sub-pages, moved Header/Footer to root-only, added padding. | Mana (Unified OS) |
| 2026-01-19 13:45 | **Auth Fix**: Implemented OTP 12345 login handshake in `ClientLayout` to hydrate test session. | Mana (Unified OS) |
| 2025-01-18 10:30 | **Visual**: Implemented interactive `ImpactInfographic` with Desktop/Mobile cinematic images. | Mana (Unified OS) |
| 2025-01-18 08:30 | **Build Fix**: Fixed Syntax error in `database.ts` and added 'use client' directives for Vercel. | Mana (Unified OS) |
| 2025-12-31 19:30 | **UX**: Palm planting 7-day notice added to OrderSuccessModal. | Mana (Unified OS) |
| 2025-12-31 18:50 | **Checkout**: Address (10+ chars) + Plaque validation added to ShoppingCart. | Mana (Unified OS) |
| 2025-12-31 17:35 | **UI**: Disabled "Voice of Palm" & "Future Vision" buttons temporarily. | Mana (Unified OS) |
| 2025-12-31 17:09 | **Bug Fix**: Timeline deed display - null-safe lookup for deed buttons. | Mana (Unified OS) |
| 2025-12-31 16:51 | **UX**: Address fields moved to basic profile info section. | Mana (Unified OS) |
| 2025-12-31 16:39 | **SEO**: Added "ูุฎู ูุนูุง" keywords to global metadata. | Mana (Unified OS) |
| 2025-12-31 13:10 | **Navigation Fix**: useRouteSync - replaceState + lastSyncedView ref to prevent loops. | Mana (Unified OS) |
| 2025-12-31 12:50 | **Bug Fix**: Removed duplicate SET_PROFILE_TAB_AND_NAVIGATE reducer case. | Mana (Unified OS) |
| 2025-12-30 09:44 | **Payment Gateway**: Created formal Test User (0900...) for bank reviewer access via `scripts/create_test_user.js`. | Mana (Unified OS) |
| 2025-12-29 19:40 | **Infra**: Setup Supabase CLI & Vercel CLI, Generated Types, Synced Env Vars. | Mana (Unified OS) |
| 2025-12-29 19:20 | **Shop & Navigation**: Restricted Shop to 'Heritage' & 'Physical'. Header/Footer 'Academy' & 'Consulting' made Coach-only (via `isCoach` flag). | Mana (Unified OS) |
| 2025-12-25 17:00 | **Auth Cleanup**: Removed "Test Login", enabled real Google OAuth, verified SMS login locally, configured Vercel Env Vars. | Mana (Unified OS) |
| 2025-12-24 20:00 | **Fix**: Removed duplicate `Header`, `Footer`, `LiveActivityBanner` from `App.tsx` (Legacy) -> Unified in `ClientWrapper` | Mana (Unified OS) |
| 2025-12-22 19:30 | **โ AI Fixed**: Switched to `mistralai/devstral-2512:free` via OpenRouter (Google quota=0, tested models) | Mana (Unified OS) |
| 2025-12-22 18:55 | **Debugging**: Hardcoded Proxy to use `gemini-2.0-flash-exp` strictly (Ignoring frontend model requests to prevent 404s) | Mana (Unified OS) |
| 2025-12-22 18:50 | **Debugging**: Forced Google Provider (`gemini-2.0-flash-exp`) in Proxy because OpenRouter Key seems invalid/broken | Mana (Unified OS) |
| 2025-12-22 18:45 | **Debugging**: Disabled Google Fallback logic (since Quota is 0) to expose real OpenRouter errors | Mana (Unified OS) |
| 2025-12-22 18:40 | **Config Change**: Switched AI to **OpenRouter** (`google/gemini-2.0-flash-exp:free`) to bypass Google Direct Quota (Limit: 0) | Mana (Unified OS) |
| 2025-12-22 18:20 | **Security**: Rotated Gemini API Key (Previous key was revoked by Google) | Mana (Unified OS) |
| 2025-12-22 18:15 | **Bug Fix**: Updated AI Models to `gemini-2.0-flash` (Fixed 404 on deprecated 1.5-flash) | Mana (Unified OS) |
| 2025-12-22 18:05 | **Config Fix**: Corrected malformed OpenRouter Key & Added VITE_GEMINI_API_KEY to .env | Mana (Unified OS) |
| 2025-12-22 18:00 | **Stability**: Enhanced AI Assistant robustness (Added Client-Side Fallback for Local Proxy failures) | Mana (Unified OS) |
| 2025-12-22 17:55 | **Bug Fix**: Fix Google Auth Redirect (Auto-navigate to Profile after OAuth) | Mana (Unified OS) |
| 2025-12-22 17:45 | **UI/UX Refinement**: Fix Header Overlap & Crash Handler (pt-32, process.env polyfill) | Mana (Unified OS) |
| 2025-12-15 17:45 | **PRODUCTION LAUNCH**: ูุฎูุณุชุงู ูุนูุง ุจุง ููููุช ูุงูฺ ุดุฏ (V5.1) | Mana (Unified OS) |
| 2025-12-15 17:28 | Vercel Fix: ุชูุธู ุฏูู vite.config.ts ุจุฑุง ุฑูุน ุฎุทุง Build | Mana (Unified OS) |
| 2025-12-15 16:35 | Security Hardening: ุญุฐู ฺฉูุฏูุง ูุงุฑุฏฺฉุฏุ Refactor ฺฉุงูู Auth Flow ุจุฑุง ุฑูุน Race Condition | Mana (CTO) |
| 2025-12-13 14:35 | ุฑูุน ฺฉุงูู ูุดฺฉู ูุงฺฏู ฺฏูฺฏู (Auth Listener + API Key) | Mana (CTO) |
| 2025-12-11 12:49 | ุชุฃุฏ Database - 16 ุฌุฏูู ููุฌูุฏ | Mana (CTO) |
| 2025-12-11 12:30 | ุฑูุน ุจุงฺฏ Schema ู ุงุฌุงุฏ ุฑุงูููุงูุง Deployment | Mana (CTO) |
| 2025-12-11 12:24 | ุงุฌุงุฏ MANA_MEMORY.md | Mana (CTO) |
| 2025-12-10 | ูพุงุฏูโุณุงุฒ Database Adapter | Mana (CTO) |
| 2025-12-10 | ูพุงุฏูโุณุงุฒ AI Proxy | Mana (CTO) |
| 2025-12-10 | ูพุงุฏูโุณุงุฒ Payment Gateway | Mana (CTO) |

---

## ๐๏ธ ุฌุฒุฆุงุช ูู ู ูุนูุงุฑ (Technical Reference)

### ๐ค ฑ. ุณุณุชู ููุด ูุตููุน (AI Architecture)
- **Primary Provider**: OpenRouter (`google/gemini-2.0-flash-exp:free`) - ุฑุงฺฏุงู ู ุจุฏูู ูุงุฒ ุจู VPN.
- **Fallback Provider**: Gemini Direct (`models/gemini-2.0-flash`).
- **Proxy Logic**: ูพุงุฏูโุณุงุฒ ุดุฏู ุฏุฑ `api/proxy.js` ุจุฑุง ูุฏุฑุช ูุฑ ุฏู Provider ู ูุฎูโุณุงุฒ ฺฉูุฏูุง.
- **ุชููุฏ ุชุตูุฑ**: ุงุณุชูุงุฏู ุงุฒ Gemini (Imagen) ู Fallback ุจู Pollinations AI ุฏุฑ `aiImageAgent.ts`.

### ๐๏ธ ฒ. ูุฏุฑุช ูุฑูุดฺฏุงู ู ูุญุชูุง (Shop & Media)
- **ุฐุฎุฑูโุณุงุฒ ุชุตุงูุฑ**: **Cloudinary** (CDN ุฌูุงูุ ุจูููโุณุงุฒ ุฎูุฏฺฉุงุฑ WebP).
- **ูพุงุฏุงุฑ ุฏุงุฏูโูุง**: ุงุณุชูุงุฏู ุงุฒ **Supabase** ุจุฑุง ุฏุชุงุจุณ ูุญุตููุงุช.
- **ุงููุช ูพุดุฑูุชู**: ุชูุงู ุชุบุฑุงุช ุฏุชุงุจุณ ุงุฒ ุทุฑู `/api/update-product.js` ุจุง `Service Role Key` ุงูุฌุงู ูโุดูุฏ ุชุง ูุดฺฉูุงุช Permission ูุฑูุฑฺฏุฑ ุญุฐู ุดูุฏ.

### ๐ ณ. ูุชุบุฑูุง ูุญุท ุญุงุช (Vercel Env Vars)
*   `NEXT_PUBLIC_SUPABASE_URL` & `NEXT_PUBLIC_SUPABASE_ANON_KEY`
*   `SUPABASE_SERVICE_ROLE_KEY` (ุจุฑุง API CRUD)
*   `OPENROUTER_API_KEY` & `GEMINI_API_KEY`
*   `CLOUDINARY_API_KEY`, `CLOUDINARY_API_SECRET`, `NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME`

---

**๐ด ุงู ุญุงูุธู ุฒูุฏู ุงุณุช ู ุจุง ูุฑ ูพุดุฑูุช ุจูโุฑูุฒุฑุณุงู ูโุดูุฏ.**

---

### ๐๏ธ Grandmaster Architect Audit (V5.4 - Infrastructure Ready)

**Current System Status:**
- **Core Stability**: โ High. Application loads reliably; database schema validated (8 tables confirmed).
- **Infrastructure**: โ **Validation Tools Complete**. Automated scripts for Schema & Env verification ready (`npm run verify:setup`).
- **Environment Management**: โ **Standardized**. `.env.example` comprehensive; Vercel setup guide updated.
- **UI Architecture**: โ๏ธ **Hybrid (Vite + Next.js 14)**. Interim state pending full Next.js 16 migration.
    - *Status*: 90% Next.js adoption; remaining 10% includes Admin views and legacy Vite runtime.
- **Code Hygiene**: โ๏ธ **Mixed Module System**. ESM in package.json but some legacy CommonJS patterns remain.

**Critical Path Forward:**
1.  **Immediate (Task 2.1)**: Complete Vercel Environment Variables setup using updated guide. Use `npm run verify:env` before Redeploy.
2.  **Before Migration**: Resolve Planting Flow Bug (Modal rendering issue reported 2025-12-24). Test E2E flows with live DB.
3.  **Migration to Next.js 16**: Only after Env + DB stability confirmed. Follow roadmap in `docs/SETUP_COMPLETE.md`.
4.  **Cleanup Post-Migration**: Remove Vite dependencies, consolidate all routes to App Router, eliminate CSS runtime CDN.

**Strategic Notes:**
- Schema is clean (no duplicates as previously suspected in older MANA_MEMORY entries).
- Environment tooling now prevents deployment errors proactively.
- Hybrid state acceptable for now; focus on stability before optimization.



| 2025-12-24 20:45 | **UI/UX Fix Attempt**: Converted `PalmSelectionModal` and `ShoppingCart` to static imports and wrapped `GlobalModals` in React Portal to fix z-index/visibility issues. (Status: Issue Persists) | Mana (Unified OS) |
| 2025-12-24 20:15 | **Auth & UI**: Added SMS OTP (Set Password), fixed `reduce` crash in Header, fixed duplicate Header rendering. | Mana (Unified OS) |

---

### โ Critical Blocking Issue (2025-12-24) - RESOLVED (2026-01-18)
- **Problem:** The "Planting Flow" (PalmSelectionModal) and "Shopping Cart" interactions were failing to show visible UI, despite the state (`isOpen`) theoretically changing.
- **Root Cause Identified:** **Split Brain Context Architecture**. The application was using two separate state managers for the cart: `CartContext` (used by the Modal) and `AppContext` (used by the UI dispatchers like 'Buy' buttons). Actions dispatched to `AppContext` were never seen by the `CartContext` listener in the modal.
- **Action Taken:** Refactored Heritage Palm purchase flow to include mandatory personalization with a live deed preview. Updated `AppContext` to use correct product images instead of placeholders. Added "My Deeds" tab to User Profile for managing heritage palms. Refactored SMS logic to use separate environment variables for OTP (`SMS_IR_OTP_TEMPLATE_ID`) and Orders (`SMS_IR_ORDER_TEMPLATE_ID`) to prevent message template overlapping.
- **Outcome:** Correct images are now displayed in the cart and deeds. Users can view and manage their purchased deeds. SMS notifications for orders and OTPs are correctly separated and formatted using dedicated SMS.ir templates.
- **Resolution:**
    1.  **Unified State:** Refactored `ShoppingCartModal` to consume `AppContext` (Single Source of Truth) instead of the isolated `CartContext`.
    2.  **Logic Sync:** Ensured `GlobalModals` and all child modals listen to the same central Reducer state.
- **Status:** โ Fixed.

---

#### 35. Planting Flow & Checkout Persistence Fixes (2026-01-18) โ
- **ุชุงุฑุฎ:** ฒธ ุฏ ฑดฐด
- **ูุฏู:** ุฑูุน ุจุงฺฏโูุง ุจุญุฑุงู ูุจู ุงุฒ ูุงูฺ ููุง.
- **ุงูุฏุงูุงุช:**
  1. **Planting Flow Fix:** ุญู ูุดฺฉู "Split Brain" ุฏุฑ ูุฏุฑุช ุงุณุชุช ุณุจุฏ ุฎุฑุฏ. ุงฺฉููู `ShoppingCartModal` ูุณุชููุงู ุงุฒ `AppContext` ุงุณุชูุงุฏู ูโฺฉูุฏ ู ููุงููฺฏ ุจุง ุฏฺฉููโูุง ุฎุฑุฏ ุนูู ูโฺฉูุฏ.
  2. **Address Persistence:** ูพุงุฏูโุณุงุฒ ููุทู ูุงูุน ุฐุฎุฑู ุขุฏุฑุณ ุฏุฑ `CheckoutView`. ุงฺฉููู ุขุฏุฑุณโูุง ุฌุฏุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ `UPDATE_USER` ุฏุฑ `AppContext` ูู ุฏุฑ ุงุณุชุช ููฺฉุงู ู ูู ุฏุฑ ุฏุชุงุจุณ (via `dbAdapter`) ุฐุฎุฑู ูโุดููุฏ.
- **ูุชุฌู:** ููููุง "ฺฉุงุดุช ูุฎู"ุ "ุณุจุฏ ุฎุฑุฏ" ู "ุซุจุช ุขุฏุฑุณ" ุงฺฉููู ฺฉุงููุงู ฺฉูพุงุฑฺู ู ูพุงุฏุงุฑ ูุณุชูุฏ.

---

## ๐ต๏ธ Architecture Audit & Deep Scan (2026-01-18)

**Status:** ๐ด CRITICAL ALERTS ACTIVE

#### 1. Middleware Active โ
- **Finding:** Imports corrected, fixed root vs sub-dir structure.
- **Status:** Active. Correctly handling auth cookies in Next.js 14.

#### 2. API Schizophrenia (Updated) โ๏ธ
- **Finding:** Duplicate API logic in `root/api/` (Legacy) vs `pages/api/` (Active).
- **Status:** Pages/api is the source of truth. Clean up planned for next major refactor.

---

### ๐ Auth Modernization, Checkout & Footer Update (2026-01-18)

**Completed Actions:**
1.  **AuthModal Modernization:**
    *   Replaced with a Glassmorphism design. supports Dual Auth (Password + OTP).
    *   Added mock SMS service (`services/otp.ts`) for simulation.
2.  **Checkout Flow Logic:**
    *   Enforced login prompt instead of redirect for guest checkout.
    *   Implemented address validation based on cart contents (Physical vs Digital).
    *   Added auto-save address to user profile on successful order.
3.  **UI Enhancements:**
    *   Re-integrated `Footer` into `ClientLayout.tsx`.
    *   Restored `HowItWorksSection` (Infographic) in `HomeView.tsx`.
### ๐ Heritage Deed Overhaul & Visual Excellence (2026-01-20) โ

**ูุฏู:** ุงุฑุชูุง ุจุตุฑ ุณูุฏ ฺฉุงุดุช ูุฎู ูุฑุงุซ (Planting Certificate) ุจู ฺฉ ฺฉุงูุง ุฏุฌุชุงู ููฺฉุณ ู ุจุงุงุฑุฒุด.

**ุงูุฏุงูุงุช ูู ู ููุฑ:**
1.  **Full-Page Background Design:**
    - ุงุณุชูุงุฏู ุงุฒ ุชุตุงูุฑ "ูุฏุฑู" ู "ฺฉูุงุณฺฉ" ุจู ุนููุงู ูพุณโุฒููู ฺฉุงูู (Edge-to-Edge).
    - ุญุฐู ุญุงุดูโูุง ุงุถุงู ู ฺฉุงุฏุฑูุง ูุญุฏูุฏฺฉููุฏู ุจุฑุง ุงุฌุงุฏ ุญุณ ุงุตุงูุช.
2.  **Absolute Positioning Based on Sketch:**
    - ุจุงุฒ ุทุฑุงุญ ฺุฏูุงู ุจุฑ ุงุณุงุณ ููุงุด ุฏุณุช ฺฉุงุฑุจุฑ (Hand-drawn Sketch).
    - ุงุฌุงุฏ "ููุทูู ุงูู" (Safe Zone) ุฏุฑ ูุฑฺฉุฒ ุชุตูุฑ ุจุฑุง ุนุฏู ุชุฏุงุฎู ููุดุชูโูุง ุจุง ุชูู ู ุจุฑฺฏโูุง ูุฎู.
    - ุฏุณุชูโุจูุฏ ูุญุชูุง ุฏุฑ ณ ุจุงฺฉุณ ุงุตู: ุชุชุฑ (ุจุงูุง ฺูพ)ุ ูุช (ูุฑฺฉุฒ-ูพุงู)ุ ู ุฌุฒุฆุงุช ููุง/ููุฑ (ูพุงู-ุทุฑูู).
3.  **Dynamic Contrast System (Classic Mode Stability):**
    - ูพุงุฏูโุณุงุฒ ููุทู ุชุบุฑ ุฑูฺฏ ููุดููุฏ: ุฏุฑ ุญุงูุช **ฺฉูุงุณฺฉ**ุ ููุดุชูโูุง ุงุฒ ุณูุฏ ุจู **ุจุฑูุฒ ุชุฑู (Deep Bronze)** ุชุบุฑ ุงูุชู ู ุฏุงุฑุง ฺฉ **ูุงูู ููุฑ ุณูุฏ (White Glow)** ูโุดููุฏ ุชุง ุฑู ูพุณโุฒูููโูุง ุฑูุดู ู ุดููุบ ฺฉุงููุงู ุฎูุงูุง ุจุงุดูุฏ.
4.  **Typography & Readability:**
    - ุชููุช ุณุงูโูุง (`Drop Shadows`) ุฏุฑ ุญุงูุช ูุฏุฑู ุจุฑุง ุชูฺฉฺฉ ูุชู ุงุฒ ูพุณโุฒููู.
    - ุงุณุชูุงุฏู ุงุฒ ูููุชโูุง ุจููุฏ ุจุฑุง ูุงู ุตุงุญุจ ูุฎู ู ูุช ฺฉุงุดุช.
5.  **Seal Shrinkage:** ฺฉูฺฺฉโุณุงุฒ ููุฑ ุงุตุงูุช ุจุฑุง ุญูุธ ุธุฑุงูุช ู ุชุนุงุฏู ุจุตุฑ.

**ูุชุฌู:** ุณูุฏ ฺฉุงุดุช ุงฺฉููู ฺฉ ุฎุฑูุฌ ุจุตุฑ ุฎุฑูโฺฉููุฏู ุฏุงุฑุฏ ฺฉู ูู ุจู ุนููุงู ฺฉ ูุฏุฑฺฉ ุฑุณู ู ูู ุจู ุนููุงู ฺฉ ุงุซุฑ ููุฑ ุฏุฌุชุงู ูุงุจู ุงุดุชุฑุงฺฉโฺฏุฐุงุฑ ุงุณุช.

---

### ๐จ ุงุณุชุฑุงุชฺ ุงูููฺฏุฑุงูฺฉ ุขูุฏู (Suggestions)

ุจุฑุง ุจุฎุดโูุง ูุฎุชูู ุณุงุชุ ุงูููฺฏุฑุงูฺฉโูุง ุฒุฑ ุจุง ุณุจฺฉ "Minimalist 2D Vector" ูพุดููุงุฏ ูโุดููุฏ:
1.  **The Impact Cycle (ฺุฑุฎู ุงุซุฑ):** ููุงุด ูุณุฑ ูพูู ุงุฒ "ูุช ุฎุฑุฏุงุฑ" ุชุง "ุณูุฑู ฺฉุดุงูุฑุฒ" ู "ุงุญุง ุฒูู".
2.  **Environmental Credit (ุงุนุชุจุงุฑ ุณุจุฒ):** ููุงุณู ูุฏุฑุช ุฌุฐุจ ุฏโุงฺฉุณุฏ ฺฉุฑุจู ฺฉ ูุฎู ุฏุฑ ููุงุจู ุขูุงูุฏูโูุง ุดูุฑ.
3.  **Growth Stages (ูุฑุงุญู ุฑุดุฏ):** ฺฏุงูุดูุงุฑ ุชุตูุฑ ุงุฒ ูุณุชู ุชุง ูุฎู ุจุงุฑูุฑ ุฏุฑ ุจุฎุด Heritage.
4.  **Heritage Map (ููุดู ูุฎูุณุชุงู):** ููุง ุดูุงุชฺฉ ู ููุฑ ุงุฒ ุฒููโูุง ูุฎุชูู ฺฉุงุดุช (ุฒูู ุงุฒุฏูุงุฌุ ุงุฏุจูุฏุ ุชููุฏ ู ...).

---

**๐ด ุงู ุญุงูุธู ุฒูุฏู ุงุณุช ู ุจุง ูุฑ ูพุดุฑูุช ุจูโุฑูุฒุฑุณุงู ูโุดูุฏ.**
    *   Fixed `FAQ` component user prop error.

**Next Steps (User):**
1.  Resolve local Node.js environment issues (`npm` not found).
2.  Test the full flow: Register -> Add to Cart -> Checkout (Save Address).

---

---

### ๐ Premium UI & Core Service Fixes (2026-02-02) โ

**ูุฏู:** ุงุฑุชูุง ฺฉูุช ุชุฌุฑุจู ฺฉุงุฑุจุฑ (Premium UX) ู ุญู ุจุงฺฏโูุง ูพุงุฏุงุฑ ุฏุงุฏูโูุง (Data Persistence).

**ฑ. ุจุงุฒุทุฑุงุญ ููุฏูฺฏ ุณุณุชู (Premium Loading Spinner):**
*   **ุชุบุฑ:** ุทุฑุงุญ ฺฉุงููุงู ุฌุฏุฏ ฺฉุงููพูููุช `LoadingSpinner` ุจุง ููฺฏู ณโุจุนุฏ ุฑุณู ูุฎูุณุชุงู ูุนูุง.
*   **ุงูฺฉุชโูุง:** ุฏุงุฑุง ุฑูฺฏ ุจุฑูู ูุชุญุฑฺฉุ ุฏุฑุฎุดุด ููุงู (Glow)ุ ู ุงููุดูโูุง CSS ูพุดุฑูุชู.
*   **ฺฉูพุงุฑฺฺฏ:** ุฌุงฺฏุฒู ุชูุงู ููุฏูฺฏโูุง ุตูุญุงุช ุงุตู (Home, Articles) ู ูพุฑููุงู ุจุง ุงู ุทุฑุงุญ ุฌุฏุฏ ุจุฑุง ุงุฌุงุฏ ุญุณ ูุญุตูู ุงุฑุฒุดููุฏ (High-end).

**ฒ. ุฑูุน ุจุงฺฏ ุงุฑุณุงู ูพุงูฺฉ (SMS.ir Integration):**
*   **ูุดฺฉู:** ุฒูุงู ุงููุถุง ฺฉุฏ ุชุงุฏ ุฏุฑ ูุชู ูพุงูฺฉ ููุงุด ุฏุงุฏู ููโุดุฏ.
*   **ุฑุงูฺฉุงุฑ:** ุงุถุงูู ฺฉุฑุฏู ูพุงุฑุงูุชุฑูุง `EXPIRE_TIME` ู `expired_time` ุฏุฑ ูุฑ ุฏู ุณุทุญ Supabase Edge Function ู Vercel API.
*   **ูุชุฌู:** ูุชุบุฑ ต ุฏููู ุงฺฉููู ุจู ุฏุฑุณุช ุฏุฑ ูุงูุจโูุง SMS.ir ุฌุงฺฏุฐุงุฑ ูโุดูุฏ.

**ณ. ูพุงุฏุงุฑ ุขุฏุฑุณโูุง ู ููู ุซุจุชโูุงู (Data Persistence):**
*   **ุฑูุน ููุชุฑ ุขุฏุฑุณ:** ุบุฑูุนุงู ฺฉุฑุฏู ุงุนุชุจุงุฑุณูุฌ ุณุฎุชฺฏุฑุงูู ุฏุฑ ุณูุช ุณุฑูุฑ (`update-user-v2`) ฺฉู ุจุงุนุซ ุญุฐู ุขุฏุฑุณโูุง ฺฉูุชุงู (ูุซู "ุชูุฑุงู") ูโุดุฏ.
*   **password_set:** ุฑูุน ุจุงฺฏ ฺฉู ูุงูุน ุงุฒ ุฐุฎุฑู ุฏุงุฆู ูุถุนุช "ุฑูุฒ ุนุจูุฑ ุชุนู ุดุฏู" ุฏุฑ ูุชุงุฏุงุชุง ูพุฑููุงู ูโุดุฏ.
*   **ููุงููฺฏ ูพุฑููุงู:** ุงุตูุงุญ `set-password.js` ุจุฑุง ุงุชุตุงู ุญุณุงุจ ฺฉุงุฑุจุฑ ุจู ุงูู Gmail ฺฉุงุฑุจุฑ ุฏุฑ ููฺฏุงู ุชูุธู ุฑูุฒ ุนุจูุฑ.

**ด. ูุฏุฑุช ููุดููุฏ Onboarding:**
*   **Logic:** ููุฏุงู "ุชฺฉูู ูพุฑููุงู" (ุซุจุช ุขุฏุฑุณ/ุฑูุฒ) ุงฺฉููู ุจุฑุง ุงุฏููโูุง ููุงุด ุฏุงุฏู ููโุดูุฏ.
*   **Admin Sync:** ุชูุธู ูุถุนุช "ูุฏุฑ ฺฉู" ุจุฑุง ฺฉุงุฑุจุฑ `09222453571` ุจุง ูพุดุชุจุงู ุงุฒ ูุฑูุฏ ููุฒูุงู ุจุง ุดูุงุฑู ููุจุงู ู Gmail.

**ูุชุฌู:** ุณุณุชู ุงฺฉููู ุงุฒ ูุธุฑ ุจุตุฑ ุญุฑููโุงโุชุฑ ู ุงุฒ ูุธุฑ ุนููฺฉุฑุฏ (ุซุจุช ุขุฏุฑุณ ู ูุฑูุฏ) ฺฉุงููุงู ูพุงุฏุงุฑ ุงุณุช.

---

### ๐ก๏ธ Admin Access & Shop Performance (2026-02-04) โ

**ูุฏู:** ุญู ูุดฺฉู ุนุฏู ุชุดุฎุต ุงุฏูู ู ุจูุจูุฏ ุณุฑุนุช ููุฏูฺฏ ูุฑูุดฺฏุงู.

**ฑ. ฺฺฉุด ุงููุช ุงุฏูู (Admin Security Hammer):**
*   **ูุดฺฉู:** ุงุฏูู ุงุตู (`09222453571`) ุฏุฑ ูุฑูุฏ ุจุง ุฑูุฒ ุนุจูุฑ ุจู ุฏูู ุชุงุฎุฑ ุฏุชุงุจุณ ุง ูุงููุงููฺฏ UUID ุดูุงุณุง ููโุดุฏ.
*   **ุฑุงูฺฉุงุฑ:** ูพุงุฏูโุณุงุฒ ูฺฉุงูุฒู "Brute-Force Override" ุฏุฑ `AppContext` Reducer.
*   **ุฌุฒุฆุงุช:** ุงฺฏุฑ ฺฉุงุฑุจุฑ ุจุง UUID (`3e47...`)ุ ููุจุงู (`9222453571`) ุง ุงูู (`hhakamian@gmail.com`) ุดูุงุณุง ุดูุฏุ ูพุฑฺู `isAdmin` ุฏุฑ ุณุทุญ State ุจู ุตูุฑุช ุงุฌุจุงุฑ `true` ูโุดูุฏ.

**ฒ. ฺฏุฌุช ุณูุงูุช ุงุชุตุงู (Connection Health Gadget):**
*   **ุงูุฒูุฏู ุฌุฏุฏ:** ฺฉ ุงุจุฒุงุฑ ูุงูุชูุฑูฺฏ ุดูุงูุฑ (ููุท ุจุฑุง ุงุฏูู) ฺฉู Ping ุจู ุฏุชุงุจุณ Supabase ุฑุง ูุญุธูโุง ููุงุด ูโุฏูุฏ.
*   **ุชุดุฎุต ููุดููุฏ:** ุงู ฺฏุฌุช ูุฒ ุงุฒ ููุทู "ฺฺฉุด ุงููุช" ุงุณุชูุงุฏู ูโฺฉูุฏ ุชุง ุญุช ุงฺฏุฑ ุฏุณุชุฑุณ ุงุฏูู ุฏุฑ ุฏุชุงุจุณ ุซุจุช ูุดุฏู ุจุงุดุฏุ ุจุฑุง ฺฉุงุฑุจุฑ ุงุตู ููุงุด ุฏุงุฏู ุดูุฏ.

**ณ. ุจูููโุณุงุฒ ูุฑูุดฺฏุงู (LCP Optimization):**
*   **ูุดฺฉู:** ฺฉูุฏ ุจุงุฒ ุดุฏู ุตูุญู ูุฑูุดฺฏุงู ุจู ุฏูู ููุฏ ุชูุจู (Lazy Load) ููู ุชุตุงูุฑ.
*   **ุฑุงูฺฉุงุฑ:** ุงุณุชูุงุฏู ุงุฒ `priority={true}` ุจุฑุง ุชุตุงูุฑ ุงุตู ูุญุตููุงุช ู ุชุนู ุงุจุนุงุฏ ุซุงุจุช (`width/height`) ุจุฑุง ุฌููฺฏุฑ ุงุฒ Layout Shift.

**ด. ุงุตูุงุญ ููู ูพุฑุฏุงุฎุช:**
*   **ุจุงฺฏ:** ุฏฺฉูู "ุชุงุฏ ููุง" ุฏุฑ ุณุจุฏ ุฎุฑุฏ ฺฉุงุฑ ููโฺฉุฑุฏ.
*   **ูฺฉุณ:** ุงุตูุงุญ ููุทู `ShoppingCartModal` ุจุฑุง ุจุณุชู ููุฏุงู ู ูุฏุงุช ุตุญุญ ุจู `/checkout`.

**ต. ุฎุฑูุฌ ุขู (Instant Logout):**
*   **ุจูุจูุฏ:** ูพุงฺฉโุณุงุฒ `localStorage` ู `sessionStorage` ูุจู ุงุฒ ุงุฑุณุงู ุฏุฑุฎูุงุณุช ุจู ุณุฑูุฑุ ุฌูุช ุงุฌุงุฏ ุญุณ ุณุฑุนุช ุจุงูุง ุฏุฑ ุฎุฑูุฌ.

---

**ถ. ุฑูุน ุชุฏุงุฎู UI ู ููุงุด ฺฏุงูุดูุงุฑ:**
*   **ุฌุงุจุฌุง ฺฏุฌุช:** ุงูุชูุงู ุงุจุฒุงุฑ ูุงูุชูุฑูฺฏ ุจู ูพุงู-ฺูพ (`bottom-6 left-6`) ุจุฑุง ุฌููฺฏุฑ ุงุฒ ูููพูุดุงู ุจุง ูุฌุช ฺุช ู ููุชูฺฉุดูโูุง.
*   **ฺฏุงูุดูุงุฑ ูพูุง (Dynamic Timeline):** ุญู ูุดฺฉู "ุฎุงู ุจูุฏู ฺฏุงูุดูุงุฑ" ุจุง ุชููุฏ ุฎูุฏฺฉุงุฑ ุฑูุฏุงุฏูุง ุงุฒ ุฑู ูุณุช `orders`. ุงฺฉููู ุญุช ุงฺฏุฑ ูุชุงุฏุชุง ูพุฑููุงู ุณูฺฉ ูุดุฏู ุจุงุดุฏุ ุฎุฑุฏูุง ุจูุงูุงุตูู ุฏุฑ ุชุงูโูุงู ุฏุฏู ูโุดููุฏ.

---

**ท. ุจูุจูุฏ ุชุฌุฑุจู ูุฑูุฏ (Auth UI):**
*   **ูุดุงูุฏู ุฑูุฒ:** ุงุถุงูู ุดุฏู ุขฺฉูู ฺุดู ุจู ููุฏ ุฑูุฒ ุนุจูุฑ ุจุฑุง ุฌุงุจุฌุง ุจู ุญุงูุช ูุฎู ู ููุงุงู.
*   **ฺฏุฒูู ูุฑุง ุจู ุฎุงุทุฑ ุจุณูพุงุฑ:** ุงุถุงูู ุดุฏู ฺฺฉโุจุงฺฉุณ "Remember Me" ุจู ุจุฎุด ูุฑูุฏ ุจุง ุฑูุฒ ุนุจูุฑ ุฌูุช ุจูุจูุฏ ุฏุณุชุฑุณ ฺฉุงุฑุจุฑุงู.

---

**๐ด ุงู ุญุงูุธู ุฒูุฏู ุงุณุช ู ุจุง ูุฑ ูพุดุฑูุช ุจูโุฑูุฒุฑุณุงู ูโุดูุฏ.**


