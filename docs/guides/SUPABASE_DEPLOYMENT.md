# ๐ ุฑุงูููุง ุงุฌุฑุง Schema ุฏุฑ Supabase

> **ุชุงุฑุฎ:** 2025-12-11  
> **ูุถุนุช Schema:** โ ูพุงฺฉโุณุงุฒ ุดุฏู ู ุขูุงุฏู ุงุฌุฑุง

---

## ๐ ุฌุฏุงูู ููุฌูุฏ ุฏุฑ Schema (13 ุฌุฏูู)

โ `profiles` - ูพุฑููุงู ฺฉุงุฑุจุฑุงู  
โ `impact_categories` - ุฏุณุชูโุจูุฏ ุชุฃุซุฑุงุช ุงุฌุชูุงุน  
โ `products` - ูุญุตููุงุช ูุฑูุดฺฏุงู  
โ `orders` - ุณูุงุฑุดุงุช  
โ `order_items` - ุขุชูโูุง ุณูุงุฑุด  
โ `user_impact_logs` - ูุงฺฏ ุชุฃุซุฑุงุช ฺฉุงุฑุจุฑ  
โ `payment_plans` - ุทุฑุญโูุง ุงูุณุงุท  
โ `crowdfunds` - ฺฉููพูโูุง ฺฉุฑุงุฏูุงูุฏูฺฏ  
โ `crowdfund_contributors` - ูุดุงุฑฺฉุชโฺฉููุฏฺฏุงู ฺฉุฑุงุฏูุงูุฏูฺฏ  
โ `courses` - ุฏูุฑูโูุง ุขููุฒุด  
โ `course_modules` - ูุงฺููโูุง ุฏูุฑู  
โ `lessons` - ุฏุฑุณโูุง  
โ `enrollments` - ุซุจุชโูุงูโูุง ุฏุฑ ุฏูุฑูโูุง

---

## ๐ง ูุฑุงุญู ุงุฌุฑุง (ฺฏุงู ุจู ฺฏุงู)

### ฺฏุงู 1: ูุฑูุฏ ุจู Supabase Dashboard

1. ุจู ุขุฏุฑุณ ุฒุฑ ุจุฑูุฏ:
   ```
   https://app.supabase.com/project/sbjrayzghjfsmmuygwbw
   ```

2. ูุงฺฏู ฺฉูุฏ (ุงฺฏุฑ ูุงฺฏู ูุณุชุฏ)

---

### ฺฏุงู 2: ุจุงุฒ ฺฉุฑุฏู SQL Editor

1. ุงุฒ ููู ุณูุช ฺูพุ ุฑู **"SQL Editor"** ฺฉูฺฉ ฺฉูุฏ
2. ุฑู **"New query"** ฺฉูฺฉ ฺฉูุฏ

---

### ฺฏุงู 3: ฺฉูพ ฺฉุฑุฏู Schema

1. ูุงู `supabase_schema.sql` ุฑุง ุจุงุฒ ฺฉูุฏ
2. **ุชูุงู ูุญุชูุง ูุงู** ุฑุง ฺฉูพ ฺฉูุฏ (Ctrl+A โ Ctrl+C)

---

### ฺฏุงู 4: ุงุฌุฑุง Schema

1. ูุญุชูุง ฺฉูพ ุดุฏู ุฑุง ุฏุฑ SQL Editor ูพุณุช ฺฉูุฏ (Ctrl+V)
2. ุฑู ุฏฺฉูู **"Run"** (ุง F5) ฺฉูฺฉ ฺฉูุฏ
3. ููุชุธุฑ ุจูุงูุฏ ุชุง ุงุฌุฑุง ุชฺฉูู ุดูุฏ

---

### ฺฏุงู 5: ุจุฑุฑุณ ูุชุฌู

#### โ ุงฺฏุฑ ูููู ุจูุฏ:
- ูพุงู **"Success. No rows returned"** ุง ูุดุงุจู ุขู ุฑุง ุฎูุงูุฏ ุฏุฏ
- ุฏุฑ ููู ุณูุช ฺูพุ ุฑู **"Table Editor"** ฺฉูฺฉ ฺฉูุฏ
- ุจุงุฏ 13 ุฌุฏูู ุฑุง ุจุจูุฏ

#### โ ุงฺฏุฑ ุฎุทุง ุฏุงุฏ:
- ูพุงู ุฎุทุง ุฑุง ฺฉูพ ฺฉูุฏ
- ุจู ูู ุจูุฑุณุชุฏ ุชุง ุฑูุน ฺฉูู

---

## ๐งช ุชุณุช ุงุชุตุงู (ุงุฎุชุงุฑ)

ุจุนุฏ ุงุฒ ุงุฌุฑุง ูููู Schemaุ ูโุชูุงูุฏ ุงุชุตุงู ุฑุง ุชุณุช ฺฉูุฏ:

### ุฑูุด 1: ุงุฒ ุทุฑู SQL Editor

ุฏุฑ SQL Editorุ ุงู ฺฉูุฆุฑ ุฑุง ุงุฌุฑุง ฺฉูุฏ:

```sql
-- ุชุณุช ุงุฌุงุฏ ฺฉ ฺฉุงุฑุจุฑ ููููู
INSERT INTO profiles (id, email, full_name, points, level)
VALUES (
  gen_random_uuid(),
  'test@manapalm.com',
  'ฺฉุงุฑุจุฑ ุชุณุช',
  100,
  'ุฌูุงูู'
);

-- ูุดุงูุฏู ฺฉุงุฑุจุฑ ุงุฌุงุฏ ุดุฏู
SELECT * FROM profiles WHERE email = 'test@manapalm.com';
```

ุงฺฏุฑ ฺฉุงุฑุจุฑ ุงุฌุงุฏ ุดุฏุ ุนู Schema ุจู ุฏุฑุณุช ุงุฌุฑุง ุดุฏู ุงุณุช! โ

---

### ุฑูุด 2: ุงุฒ ุทุฑู App

1. ุงูพูฺฉุดู ุฑุง ุงุฌุฑุง ฺฉูุฏ
2. ุจู ฺฉูุณูู ูุฑูุฑฺฏุฑ (F12) ุจุฑูุฏ
3. ุงู ฺฉุฏ ุฑุง ุงุฌุฑุง ฺฉูุฏ:

```javascript
// ุชุณุช ุงุชุตุงู ุจู Supabase
const { data, error } = await supabase.from('profiles').select('*').limit(1);
console.log('Connection Test:', { data, error });
```

ุงฺฏุฑ `error` ุฎุงู ุจูุฏุ ุงุชุตุงู ูููู ุงุณุช! โ

---

## ๐ RLS (Row Level Security)

Schema ุดุงูู ูพุงูุณโูุง ุงููุช RLS ุงุณุช ฺฉู:

โ ฺฉุงุฑุจุฑุงู ููุท ูพุฑููุงู ุฎูุฏุดุงู ุฑุง ุจุจููุฏ  
โ ฺฉุงุฑุจุฑุงู ููุท ุณูุงุฑุดุงุช ุฎูุฏุดุงู ุฑุง ุจุจููุฏ  
โ ูุญุตููุงุช ุจุฑุง ููู ูุงุจู ูุดุงูุฏู ุจุงุดูุฏ  
โ ฺฉุงุฑุจุฑุงู ููุท Impact Log ุฎูุฏุดุงู ุฑุง ุจุจููุฏ

---

## ๐ ุฏุงุฏูโูุง ููููู (Seed Data)

ุจุนุฏ ุงุฒ ุงุฌุฑุง Schemaุ ูโุชูุงูุฏ ุฏุงุฏูโูุง ููููู ุงุถุงูู ฺฉูุฏ:

### ุงุถุงูู ฺฉุฑุฏู Impact Categories

```sql
INSERT INTO impact_categories (name, description, icon) VALUES
('ูุญุท ุฒุณุช', 'ฺฉูฺฉ ุจู ุญูุธ ูุญุท ุฒุณุช ู ฺฉุงุดุช ุฏุฑุฎุช', 'Leaf'),
('ุขููุฒุด', 'ุญูุงุช ุงุฒ ุขููุฒุด ู ุงุฏฺฏุฑ', 'GraduationCap'),
('ููุฑุฒุฏุง', 'ฺฉูฺฉ ุจู ฺฉุงูุด ููุฑ ู ุงุฌุงุฏ ุงุดุชุบุงู', 'Heart');
```

### ุงุถุงูู ฺฉุฑุฏู ฺฉ ูุญุตูู ููููู

```sql
INSERT INTO products (name, description, price, category, image_url, impact_value, impact_unit, stock)
VALUES (
  'ฺฉุชุงุจ ูุนูุง ุฒูุฏฺฏ',
  'ุฑุงูููุง ุฌุงูุน ุจุฑุง ุงูุชู ูุนูุง ุฏุฑ ุฒูุฏฺฏ',
  250000,
  'physical',
  'https://via.placeholder.com/400x300?text=Book',
  1,
  'tree',
  50
);
```

### ุงุถุงูู ฺฉุฑุฏู ฺฉ ุฏูุฑู ููููู

```sql
INSERT INTO courses (title, description, level, duration_minutes, points_reward, is_published)
VALUES (
  'ููุฏููโุง ุจุฑ ุฒูุฏฺฏ ูุนูุงุฏุงุฑ',
  'ุงุฏ ุจฺฏุฑุฏ ฺฺฏููู ุฒูุฏฺฏ ุจุง ูุนูุงโุชุฑ ุฏุงุดุชู ุจุงุดุฏ',
  'beginner',
  120,
  50,
  true
);
```

---

## โ๏ธ ูฺฉุงุช ููู

1. **Backup**: ูุจู ุงุฒ ุงุฌุฑุงุ ุงุฒ ุฏุชุงุจุณ ูุนู (ุงฺฏุฑ ุฏุงุฏู ุฏุงุฑุฏ) Backup ุจฺฏุฑุฏ
2. **Environment**: ูุทูุฆู ุดูุฏ ุฏุฑ ูพุฑูฺู ุตุญุญ ูุณุชุฏ (`sbjrayzghjfsmmuygwbw`)
3. **Permissions**: ูุทูุฆู ุดูุฏ ุฏุณุชุฑุณ Admin ุฏุงุฑุฏ
4. **Migration**: ุจุฑุง ุชุบุฑุงุช ุขูุฏูุ ุงุฒ Migration ุงุณุชูุงุฏู ฺฉูุฏ (ูู ุงุฌุฑุง ูุฌุฏุฏ Schema)

---

## ๐ ูุฑุญูู ุจุนุฏ

ุจุนุฏ ุงุฒ ุงุฌุฑุง ูููู Schema:

โ Task 1.2 ุชฺฉูู ุดุฏ  
โญ๏ธ Task 2.1: ุชูุธู Environment Variables  
โญ๏ธ Task 3.1: ุชุณุช End-to-End

---

## ๐ ุฏุฑ ุตูุฑุช ุจุฑูุฒ ูุดฺฉู

ุงฺฏุฑ ุจุง ุฎุทุง ููุงุฌู ุดุฏุฏ:

1. ูพุงู ุฎุทุง ุฑุง ฺฉูพ ฺฉูุฏ
2. ุงุณฺฉุฑูโุดุงุช ุจฺฏุฑุฏ
3. ุจู ูู ุจูุฑุณุชุฏ

ูู ุจู ุดูุง ฺฉูฺฉ ูโฺฉูู ุชุง ูุดฺฉู ุฑุง ุญู ฺฉูู! ๐ด
